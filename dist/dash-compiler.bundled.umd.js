(function(ie,Pe){typeof exports=="object"&&typeof module!="undefined"?Pe(exports):typeof define=="function"&&define.amd?define(["exports"],Pe):(ie=typeof globalThis!="undefined"?globalThis:ie||self,Pe(ie.DashCompiler={}))})(this,function(ie){"use strict";function Pe(s){if(s.__esModule)return s;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(s).forEach(function(t){var r=Object.getOwnPropertyDescriptor(s,t);Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:function(){return s[t]}})}),e}function ae(s){if(typeof s!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(s))}function Wt(s,e){for(var t="",r=0,n=-1,i=0,u,o=0;o<=s.length;++o){if(o<s.length)u=s.charCodeAt(o);else{if(u===47)break;u=47}if(u===47){if(!(n===o-1||i===1))if(n!==o-1&&i===2){if(t.length<2||r!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){var a=t.lastIndexOf("/");if(a!==t.length-1){a===-1?(t="",r=0):(t=t.slice(0,a),r=t.length-1-t.lastIndexOf("/")),n=o,i=0;continue}}else if(t.length===2||t.length===1){t="",r=0,n=o,i=0;continue}}e&&(t.length>0?t+="/..":t="..",r=2)}else t.length>0?t+="/"+s.slice(n+1,o):t=s.slice(n+1,o),r=o-n-1;n=o,i=0}else u===46&&i!==-1?++i:i=-1}return t}function ss(s,e){var t=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return t?t===e.root?t+r:t+s+r:r}var Be={resolve:function(){for(var e="",t=!1,r,n=arguments.length-1;n>=-1&&!t;n--){var i;n>=0?i=arguments[n]:(r===void 0&&(r=process.cwd()),i=r),ae(i),i.length!==0&&(e=i+"/"+e,t=i.charCodeAt(0)===47)}return e=Wt(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(ae(e),e.length===0)return".";var t=e.charCodeAt(0)===47,r=e.charCodeAt(e.length-1)===47;return e=Wt(e,!t),e.length===0&&!t&&(e="."),e.length>0&&r&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return ae(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var r=arguments[t];ae(r),r.length>0&&(e===void 0?e=r:e+="/"+r)}return e===void 0?".":Be.normalize(e)},relative:function(e,t){if(ae(e),ae(t),e===t||(e=Be.resolve(e),t=Be.resolve(t),e===t))return"";for(var r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var n=e.length,i=n-r,u=1;u<t.length&&t.charCodeAt(u)===47;++u);for(var o=t.length,a=o-u,c=i<a?i:a,f=-1,l=0;l<=c;++l){if(l===c){if(a>c){if(t.charCodeAt(u+l)===47)return t.slice(u+l+1);if(l===0)return t.slice(u+l)}else i>c&&(e.charCodeAt(r+l)===47?f=l:l===0&&(f=0));break}var h=e.charCodeAt(r+l),C=t.charCodeAt(u+l);if(h!==C)break;h===47&&(f=l)}var y="";for(l=r+f+1;l<=n;++l)(l===n||e.charCodeAt(l)===47)&&(y.length===0?y+="..":y+="/..");return y.length>0?y+t.slice(u+f):(u+=f,t.charCodeAt(u)===47&&++u,t.slice(u))},_makeLong:function(e){return e},dirname:function(e){if(ae(e),e.length===0)return".";for(var t=e.charCodeAt(0),r=t===47,n=-1,i=!0,u=e.length-1;u>=1;--u)if(t=e.charCodeAt(u),t===47){if(!i){n=u;break}}else i=!1;return n===-1?r?"/":".":r&&n===1?"//":e.slice(0,n)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');ae(e);var r=0,n=-1,i=!0,u;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var o=t.length-1,a=-1;for(u=e.length-1;u>=0;--u){var c=e.charCodeAt(u);if(c===47){if(!i){r=u+1;break}}else a===-1&&(i=!1,a=u+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(n=u):(o=-1,n=a))}return r===n?n=a:n===-1&&(n=e.length),e.slice(r,n)}else{for(u=e.length-1;u>=0;--u)if(e.charCodeAt(u)===47){if(!i){r=u+1;break}}else n===-1&&(i=!1,n=u+1);return n===-1?"":e.slice(r,n)}},extname:function(e){ae(e);for(var t=-1,r=0,n=-1,i=!0,u=0,o=e.length-1;o>=0;--o){var a=e.charCodeAt(o);if(a===47){if(!i){r=o+1;break}continue}n===-1&&(i=!1,n=o+1),a===46?t===-1?t=o:u!==1&&(u=1):t!==-1&&(u=-1)}return t===-1||n===-1||u===0||u===1&&t===n-1&&t===r+1?"":e.slice(t,n)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return ss("/",e)},parse:function(e){ae(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var r=e.charCodeAt(0),n=r===47,i;n?(t.root="/",i=1):i=0;for(var u=-1,o=0,a=-1,c=!0,f=e.length-1,l=0;f>=i;--f){if(r=e.charCodeAt(f),r===47){if(!c){o=f+1;break}continue}a===-1&&(c=!1,a=f+1),r===46?u===-1?u=f:l!==1&&(l=1):u!==-1&&(l=-1)}return u===-1||a===-1||l===0||l===1&&u===a-1&&u===o+1?a!==-1&&(o===0&&n?t.base=t.name=e.slice(1,a):t.base=t.name=e.slice(o,a)):(o===0&&n?(t.name=e.slice(1,u),t.base=e.slice(1,a)):(t.name=e.slice(o,u),t.base=e.slice(o,a)),t.ext=e.slice(u,a)),o>0?t.dir=e.slice(0,o-1):n&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};Be.posix=Be;var j=Be,ns=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,is=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,us=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,pt={Space_Separator:ns,ID_Start:is,ID_Continue:us},V={isSpaceSeparator(s){return typeof s=="string"&&pt.Space_Separator.test(s)},isIdStartChar(s){return typeof s=="string"&&(s>="a"&&s<="z"||s>="A"&&s<="Z"||s==="$"||s==="_"||pt.ID_Start.test(s))},isIdContinueChar(s){return typeof s=="string"&&(s>="a"&&s<="z"||s>="A"&&s<="Z"||s>="0"&&s<="9"||s==="$"||s==="_"||s==="\u200C"||s==="\u200D"||pt.ID_Continue.test(s))},isDigit(s){return typeof s=="string"&&/[0-9]/.test(s)},isHexDigit(s){return typeof s=="string"&&/[0-9A-Fa-f]/.test(s)}};let dt,re,fe,Qe,me,oe,Z,Dt,Le;var os=function(e,t){dt=String(e),re="start",fe=[],Qe=0,me=1,oe=0,Z=void 0,Dt=void 0,Le=void 0;do Z=as(),hs[re]();while(Z.type!=="eof");return typeof t=="function"?Jt({"":Le},"",t):Le};function Jt(s,e,t){const r=s[e];if(r!=null&&typeof r=="object")for(const n in r){const i=Jt(r,n,t);i===void 0?delete r[n]:r[n]=i}return t.call(s,e,r)}let I,O,He,pe,L;function as(){for(I="default",O="",He=!1,pe=1;;){L=de();const s=Vt[I]();if(s)return s}}function de(){if(dt[Qe])return String.fromCodePoint(dt.codePointAt(Qe))}function m(){const s=de();return s===`
`?(me++,oe=0):s?oe+=s.length:oe++,s&&(Qe+=s.length),s}const Vt={default(){switch(L){case"	":case"\v":case"\f":case" ":case"\xA0":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":m();return;case"/":m(),I="comment";return;case void 0:return m(),U("eof")}if(V.isSpaceSeparator(L)){m();return}return Vt[re]()},comment(){switch(L){case"*":m(),I="multiLineComment";return;case"/":m(),I="singleLineComment";return}throw G(m())},multiLineComment(){switch(L){case"*":m(),I="multiLineCommentAsterisk";return;case void 0:throw G(m())}m()},multiLineCommentAsterisk(){switch(L){case"*":m();return;case"/":m(),I="default";return;case void 0:throw G(m())}m(),I="multiLineComment"},singleLineComment(){switch(L){case`
`:case"\r":case"\u2028":case"\u2029":m(),I="default";return;case void 0:return m(),U("eof")}m()},value(){switch(L){case"{":case"[":return U("punctuator",m());case"n":return m(),Fe("ull"),U("null",null);case"t":return m(),Fe("rue"),U("boolean",!0);case"f":return m(),Fe("alse"),U("boolean",!1);case"-":case"+":m()==="-"&&(pe=-1),I="sign";return;case".":O=m(),I="decimalPointLeading";return;case"0":O=m(),I="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":O=m(),I="decimalInteger";return;case"I":return m(),Fe("nfinity"),U("numeric",1/0);case"N":return m(),Fe("aN"),U("numeric",NaN);case'"':case"'":He=m()==='"',O="",I="string";return}throw G(m())},identifierNameStartEscape(){if(L!=="u")throw G(m());m();const s=gt();switch(s){case"$":case"_":break;default:if(!V.isIdStartChar(s))throw Kt();break}O+=s,I="identifierName"},identifierName(){switch(L){case"$":case"_":case"\u200C":case"\u200D":O+=m();return;case"\\":m(),I="identifierNameEscape";return}if(V.isIdContinueChar(L)){O+=m();return}return U("identifier",O)},identifierNameEscape(){if(L!=="u")throw G(m());m();const s=gt();switch(s){case"$":case"_":case"\u200C":case"\u200D":break;default:if(!V.isIdContinueChar(s))throw Kt();break}O+=s,I="identifierName"},sign(){switch(L){case".":O=m(),I="decimalPointLeading";return;case"0":O=m(),I="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":O=m(),I="decimalInteger";return;case"I":return m(),Fe("nfinity"),U("numeric",pe*(1/0));case"N":return m(),Fe("aN"),U("numeric",NaN)}throw G(m())},zero(){switch(L){case".":O+=m(),I="decimalPoint";return;case"e":case"E":O+=m(),I="decimalExponent";return;case"x":case"X":O+=m(),I="hexadecimal";return}return U("numeric",pe*0)},decimalInteger(){switch(L){case".":O+=m(),I="decimalPoint";return;case"e":case"E":O+=m(),I="decimalExponent";return}if(V.isDigit(L)){O+=m();return}return U("numeric",pe*Number(O))},decimalPointLeading(){if(V.isDigit(L)){O+=m(),I="decimalFraction";return}throw G(m())},decimalPoint(){switch(L){case"e":case"E":O+=m(),I="decimalExponent";return}if(V.isDigit(L)){O+=m(),I="decimalFraction";return}return U("numeric",pe*Number(O))},decimalFraction(){switch(L){case"e":case"E":O+=m(),I="decimalExponent";return}if(V.isDigit(L)){O+=m();return}return U("numeric",pe*Number(O))},decimalExponent(){switch(L){case"+":case"-":O+=m(),I="decimalExponentSign";return}if(V.isDigit(L)){O+=m(),I="decimalExponentInteger";return}throw G(m())},decimalExponentSign(){if(V.isDigit(L)){O+=m(),I="decimalExponentInteger";return}throw G(m())},decimalExponentInteger(){if(V.isDigit(L)){O+=m();return}return U("numeric",pe*Number(O))},hexadecimal(){if(V.isHexDigit(L)){O+=m(),I="hexadecimalInteger";return}throw G(m())},hexadecimalInteger(){if(V.isHexDigit(L)){O+=m();return}return U("numeric",pe*Number(O))},string(){switch(L){case"\\":m(),O+=cs();return;case'"':if(He)return m(),U("string",O);O+=m();return;case"'":if(!He)return m(),U("string",O);O+=m();return;case`
`:case"\r":throw G(m());case"\u2028":case"\u2029":fs(L);break;case void 0:throw G(m())}O+=m()},start(){switch(L){case"{":case"[":return U("punctuator",m())}I="value"},beforePropertyName(){switch(L){case"$":case"_":O=m(),I="identifierName";return;case"\\":m(),I="identifierNameStartEscape";return;case"}":return U("punctuator",m());case'"':case"'":He=m()==='"',I="string";return}if(V.isIdStartChar(L)){O+=m(),I="identifierName";return}throw G(m())},afterPropertyName(){if(L===":")return U("punctuator",m());throw G(m())},beforePropertyValue(){I="value"},afterPropertyValue(){switch(L){case",":case"}":return U("punctuator",m())}throw G(m())},beforeArrayValue(){if(L==="]")return U("punctuator",m());I="value"},afterArrayValue(){switch(L){case",":case"]":return U("punctuator",m())}throw G(m())},end(){throw G(m())}};function U(s,e){return{type:s,value:e,line:me,column:oe}}function Fe(s){for(const e of s){if(de()!==e)throw G(m());m()}}function cs(){switch(de()){case"b":return m(),"\b";case"f":return m(),"\f";case"n":return m(),`
`;case"r":return m(),"\r";case"t":return m(),"	";case"v":return m(),"\v";case"0":if(m(),V.isDigit(de()))throw G(m());return"\0";case"x":return m(),ls();case"u":return m(),gt();case`
`:case"\u2028":case"\u2029":return m(),"";case"\r":return m(),de()===`
`&&m(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw G(m());case void 0:throw G(m())}return m()}function ls(){let s="",e=de();if(!V.isHexDigit(e)||(s+=m(),e=de(),!V.isHexDigit(e)))throw G(m());return s+=m(),String.fromCodePoint(parseInt(s,16))}function gt(){let s="",e=4;for(;e-- >0;){const t=de();if(!V.isHexDigit(t))throw G(m());s+=m()}return String.fromCodePoint(parseInt(s,16))}const hs={start(){if(Z.type==="eof")throw we();Et()},beforePropertyName(){switch(Z.type){case"identifier":case"string":Dt=Z.value,re="afterPropertyName";return;case"punctuator":Xe();return;case"eof":throw we()}},afterPropertyName(){if(Z.type==="eof")throw we();re="beforePropertyValue"},beforePropertyValue(){if(Z.type==="eof")throw we();Et()},beforeArrayValue(){if(Z.type==="eof")throw we();if(Z.type==="punctuator"&&Z.value==="]"){Xe();return}Et()},afterPropertyValue(){if(Z.type==="eof")throw we();switch(Z.value){case",":re="beforePropertyName";return;case"}":Xe()}},afterArrayValue(){if(Z.type==="eof")throw we();switch(Z.value){case",":re="beforeArrayValue";return;case"]":Xe()}},end(){}};function Et(){let s;switch(Z.type){case"punctuator":switch(Z.value){case"{":s={};break;case"[":s=[];break}break;case"null":case"boolean":case"numeric":case"string":s=Z.value;break}if(Le===void 0)Le=s;else{const e=fe[fe.length-1];Array.isArray(e)?e.push(s):e[Dt]=s}if(s!==null&&typeof s=="object")fe.push(s),Array.isArray(s)?re="beforeArrayValue":re="beforePropertyName";else{const e=fe[fe.length-1];e==null?re="end":Array.isArray(e)?re="afterArrayValue":re="afterPropertyValue"}}function Xe(){fe.pop();const s=fe[fe.length-1];s==null?re="end":Array.isArray(s)?re="afterArrayValue":re="afterPropertyValue"}function G(s){return Ye(s===void 0?`JSON5: invalid end of input at ${me}:${oe}`:`JSON5: invalid character '${Qt(s)}' at ${me}:${oe}`)}function we(){return Ye(`JSON5: invalid end of input at ${me}:${oe}`)}function Kt(){return oe-=5,Ye(`JSON5: invalid identifier character at ${me}:${oe}`)}function fs(s){console.warn(`JSON5: '${Qt(s)}' in strings is not valid ECMAScript; consider escaping`)}function Qt(s){const e={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(e[s])return e[s];if(s<" "){const t=s.charCodeAt(0).toString(16);return"\\x"+("00"+t).substring(t.length)}return s}function Ye(s){const e=new SyntaxError(s);return e.lineNumber=me,e.columnNumber=oe,e}var ps=function(e,t,r){const n=[];let i="",u,o,a="",c;if(t!=null&&typeof t=="object"&&!Array.isArray(t)&&(r=t.space,c=t.quote,t=t.replacer),typeof t=="function")o=t;else if(Array.isArray(t)){u=[];for(const w of t){let p;typeof w=="string"?p=w:(typeof w=="number"||w instanceof String||w instanceof Number)&&(p=String(w)),p!==void 0&&u.indexOf(p)<0&&u.push(p)}}return r instanceof Number?r=Number(r):r instanceof String&&(r=String(r)),typeof r=="number"?r>0&&(r=Math.min(10,Math.floor(r)),a="          ".substr(0,r)):typeof r=="string"&&(a=r.substr(0,10)),f("",{"":e});function f(w,p){let E=p[w];switch(E!=null&&(typeof E.toJSON5=="function"?E=E.toJSON5(w):typeof E.toJSON=="function"&&(E=E.toJSON(w))),o&&(E=o.call(p,w,E)),E instanceof Number?E=Number(E):E instanceof String?E=String(E):E instanceof Boolean&&(E=E.valueOf()),E){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof E=="string")return l(E);if(typeof E=="number")return String(E);if(typeof E=="object")return Array.isArray(E)?y(E):h(E)}function l(w){const p={"'":.1,'"':.2},E={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let A="";for(let B=0;B<w.length;B++){const k=w[B];switch(k){case"'":case'"':p[k]++,A+=k;continue;case"\0":if(V.isDigit(w[B+1])){A+="\\x00";continue}}if(E[k]){A+=E[k];continue}if(k<" "){let S=k.charCodeAt(0).toString(16);A+="\\x"+("00"+S).substring(S.length);continue}A+=k}const v=c||Object.keys(p).reduce((B,k)=>p[B]<p[k]?B:k);return A=A.replace(new RegExp(v,"g"),E[v]),v+A+v}function h(w){if(n.indexOf(w)>=0)throw TypeError("Converting circular structure to JSON5");n.push(w);let p=i;i=i+a;let E=u||Object.keys(w),A=[];for(const B of E){const k=f(B,w);if(k!==void 0){let S=C(B)+":";a!==""&&(S+=" "),S+=k,A.push(S)}}let v;if(A.length===0)v="{}";else{let B;if(a==="")B=A.join(","),v="{"+B+"}";else{let k=`,
`+i;B=A.join(k),v=`{
`+i+B+`,
`+p+"}"}}return n.pop(),i=p,v}function C(w){if(w.length===0)return l(w);const p=String.fromCodePoint(w.codePointAt(0));if(!V.isIdStartChar(p))return l(w);for(let E=p.length;E<w.length;E++)if(!V.isIdContinueChar(String.fromCodePoint(w.codePointAt(E))))return l(w);return w}function y(w){if(n.indexOf(w)>=0)throw TypeError("Converting circular structure to JSON5");n.push(w);let p=i;i=i+a;let E=[];for(let v=0;v<w.length;v++){const B=f(String(v),w);E.push(B!==void 0?B:"null")}let A;if(E.length===0)A="[]";else if(a===""){let v=E.join(",");A="["+v+"]"}else{let v=`,
`+i,B=E.join(v);A=`[
`+i+B+`,
`+p+"]"}return n.pop(),i=p,A}},Me={parse:os,stringify:ps},ds=Object.defineProperty,Ds=Object.defineProperties,gs=Object.getOwnPropertyDescriptors,Xt=Object.getOwnPropertySymbols,Es=Object.prototype.hasOwnProperty,ms=Object.prototype.propertyIsEnumerable,Yt=(s,e,t)=>e in s?ds(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,Re=(s,e)=>{for(var t in e||(e={}))Es.call(e,t)&&Yt(s,t,e[t]);if(Xt)for(var t of Xt(e))ms.call(e,t)&&Yt(s,t,e[t]);return s},Ze=(s,e)=>Ds(s,gs(e));function Zt(s,e){for(var t=0,r=s.length-1;r>=0;r--){var n=s[r];n==="."?s.splice(r,1):n===".."?(s.splice(r,1),t++):t&&(s.splice(r,1),t--)}if(e)for(;t--;t)s.unshift("..");return s}var Cs=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,mt=function(s){return Cs.exec(s).slice(1)};function et(){for(var s="",e=!1,t=arguments.length-1;t>=-1&&!e;t--){var r=t>=0?arguments[t]:"/";if(typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)continue;s=r+"/"+s,e=r.charAt(0)==="/"}return s=Zt(Ft(s.split("/"),function(n){return!!n}),!e).join("/"),(e?"/":"")+s||"."}function Ct(s){var e=At(s),t=Fs(s,-1)==="/";return s=Zt(Ft(s.split("/"),function(r){return!!r}),!e).join("/"),!s&&!e&&(s="."),s&&t&&(s+="/"),(e?"/":"")+s}function At(s){return s.charAt(0)==="/"}function er(){var s=Array.prototype.slice.call(arguments,0);return Ct(Ft(s,function(e,t){if(typeof e!="string")throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function tr(s,e){s=et(s).substr(1),e=et(e).substr(1);function t(c){for(var f=0;f<c.length&&c[f]==="";f++);for(var l=c.length-1;l>=0&&c[l]==="";l--);return f>l?[]:c.slice(f,l-f+1)}for(var r=t(s.split("/")),n=t(e.split("/")),i=Math.min(r.length,n.length),u=i,o=0;o<i;o++)if(r[o]!==n[o]){u=o;break}for(var a=[],o=u;o<r.length;o++)a.push("..");return a=a.concat(n.slice(u)),a.join("/")}var rr="/",sr=":";function nr(s){var e=mt(s),t=e[0],r=e[1];return!t&&!r?".":(r&&(r=r.substr(0,r.length-1)),t+r)}function ir(s,e){var t=mt(s)[2];return e&&t.substr(-1*e.length)===e&&(t=t.substr(0,t.length-e.length)),t}function ur(s){return mt(s)[3]}var As={extname:ur,basename:ir,dirname:nr,sep:rr,delimiter:sr,relative:tr,join:er,isAbsolute:At,normalize:Ct,resolve:et};function Ft(s,e){if(s.filter)return s.filter(e);for(var t=[],r=0;r<s.length;r++)e(s[r],r,s)&&t.push(s[r]);return t}var Fs="ab".substr(-1)==="b"?function(s,e,t){return s.substr(e,t)}:function(s,e,t){return e<0&&(e=s.length+e),s.substr(e,t)},wt=Object.freeze({__proto__:null,resolve:et,normalize:Ct,isAbsolute:At,join:er,relative:tr,sep:rr,delimiter:sr,dirname:nr,basename:ir,extname:ur,default:As});function or(){throw new Error("setTimeout has not been defined")}function ar(){throw new Error("clearTimeout has not been defined")}var Ce=or,Ae=ar,ke;typeof window!="undefined"?ke=window:typeof self!="undefined"?ke=self:ke={},typeof ke.setTimeout=="function"&&(Ce=setTimeout),typeof ke.clearTimeout=="function"&&(Ae=clearTimeout);function cr(s){if(Ce===setTimeout)return setTimeout(s,0);if((Ce===or||!Ce)&&setTimeout)return Ce=setTimeout,setTimeout(s,0);try{return Ce(s,0)}catch{try{return Ce.call(null,s,0)}catch{return Ce.call(this,s,0)}}}function ws(s){if(Ae===clearTimeout)return clearTimeout(s);if((Ae===ar||!Ae)&&clearTimeout)return Ae=clearTimeout,clearTimeout(s);try{return Ae(s)}catch{try{return Ae.call(null,s)}catch{return Ae.call(this,s)}}}var De=[],$e=!1,ye,tt=-1;function ys(){!$e||!ye||($e=!1,ye.length?De=ye.concat(De):tt=-1,De.length&&lr())}function lr(){if(!$e){var s=cr(ys);$e=!0;for(var e=De.length;e;){for(ye=De,De=[];++tt<e;)ye&&ye[tt].run();tt=-1,e=De.length}ye=null,$e=!1,ws(s)}}function vs(s){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];De.push(new hr(s,e)),De.length===1&&!$e&&cr(lr)}function hr(s,e){this.fun=s,this.array=e}hr.prototype.run=function(){this.fun.apply(null,this.array)};var xs="browser",bs="browser",Ss=!0,_s=[],Bs="",Rs={},ks={},$s={};function ve(){}var Ts=ve,Os=ve,Ns=ve,Is=ve,Ps=ve,Ls=ve,Hs=ve;function Ms(s){throw new Error("process.binding is not supported")}function js(){return"/"}function Us(s){throw new Error("process.chdir is not supported")}function Gs(){return 0}var Te=ke.performance||{},qs=Te.now||Te.mozNow||Te.msNow||Te.oNow||Te.webkitNow||function(){return new Date().getTime()};function zs(s){var e=qs.call(Te)*.001,t=Math.floor(e),r=Math.floor(e%1*1e9);return s&&(t=t-s[0],r=r-s[1],r<0&&(t--,r+=1e9)),[t,r]}var Ws=new Date;function Js(){var s=new Date,e=s-Ws;return e/1e3}var Vs={nextTick:vs,title:xs,browser:Ss,env:{NODE_ENV:"production"},argv:_s,version:Bs,versions:Rs,on:Ts,addListener:Os,once:Ns,off:Is,removeListener:Ps,removeAllListeners:Ls,emit:Hs,binding:Ms,cwd:js,chdir:Us,umask:Gs,hrtime:zs,platform:bs,release:ks,config:$s,uptime:Js};function Ks(s,e,t){return t={path:e,exports:{},require:function(r,n){return Qs(r,n==null?t.path:n)}},s(t,t.exports),t.exports}function Qs(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}const ce="\\\\/",fr=`[^${ce}]`,ge="\\.",Xs="\\+",Ys="\\?",rt="\\/",Zs="(?=.)",pr="[^/]",yt=`(?:${rt}|$)`,dr=`(?:^|${rt})`,vt=`${ge}{1,2}${yt}`,en=`(?!${ge})`,tn=`(?!${dr}${vt})`,rn=`(?!${ge}{0,1}${yt})`,sn=`(?!${vt})`,nn=`[^.${rt}]`,un=`${pr}*?`,Dr={DOT_LITERAL:ge,PLUS_LITERAL:Xs,QMARK_LITERAL:Ys,SLASH_LITERAL:rt,ONE_CHAR:Zs,QMARK:pr,END_ANCHOR:yt,DOTS_SLASH:vt,NO_DOT:en,NO_DOTS:tn,NO_DOT_SLASH:rn,NO_DOTS_SLASH:sn,QMARK_NO_DOT:nn,STAR:un,START_ANCHOR:dr},on=Ze(Re({},Dr),{SLASH_LITERAL:`[${ce}]`,QMARK:fr,STAR:`${fr}*?`,DOTS_SLASH:`${ge}{1,2}(?:[${ce}]|$)`,NO_DOT:`(?!${ge})`,NO_DOTS:`(?!(?:^|[${ce}])${ge}{1,2}(?:[${ce}]|$))`,NO_DOT_SLASH:`(?!${ge}{0,1}(?:[${ce}]|$))`,NO_DOTS_SLASH:`(?!${ge}{1,2}(?:[${ce}]|$))`,QMARK_NO_DOT:`[^.${ce}]`,START_ANCHOR:`(?:^|[${ce}])`,END_ANCHOR:`(?:[${ce}]|$)`}),an={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};var xe={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:an,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:wt.sep,extglobChars(s){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${s.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(s){return s===!0?on:Dr}},ee=Ks(function(s,e){const{REGEX_BACKSLASH:t,REGEX_REMOVE_BACKSLASH:r,REGEX_SPECIAL_CHARS:n,REGEX_SPECIAL_CHARS_GLOBAL:i}=xe;e.isObject=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),e.hasRegexChars=u=>n.test(u),e.isRegexChar=u=>u.length===1&&e.hasRegexChars(u),e.escapeRegex=u=>u.replace(i,"\\$1"),e.toPosixSlashes=u=>u.replace(t,"/"),e.removeBackslashes=u=>u.replace(r,o=>o==="\\"?"":o),e.supportsLookbehinds=()=>{const u=Vs.version.slice(1).split(".").map(Number);return u.length===3&&u[0]>=9||u[0]===8&&u[1]>=10},e.isWindows=u=>u&&typeof u.windows=="boolean"?u.windows:wt.sep==="\\",e.escapeLast=(u,o,a)=>{const c=u.lastIndexOf(o,a);return c===-1?u:u[c-1]==="\\"?e.escapeLast(u,o,c-1):`${u.slice(0,c)}\\${u.slice(c)}`},e.removePrefix=(u,o={})=>{let a=u;return a.startsWith("./")&&(a=a.slice(2),o.prefix="./"),a},e.wrapOutput=(u,o={},a={})=>{const c=a.contains?"":"^",f=a.contains?"":"$";let l=`${c}(?:${u})${f}`;return o.negated===!0&&(l=`(?:^(?!${l}).*$)`),l}});const{CHAR_ASTERISK:xt,CHAR_AT:cn,CHAR_BACKWARD_SLASH:je,CHAR_COMMA:ln,CHAR_DOT:bt,CHAR_EXCLAMATION_MARK:St,CHAR_FORWARD_SLASH:gr,CHAR_LEFT_CURLY_BRACE:_t,CHAR_LEFT_PARENTHESES:Bt,CHAR_LEFT_SQUARE_BRACKET:hn,CHAR_PLUS:fn,CHAR_QUESTION_MARK:Er,CHAR_RIGHT_CURLY_BRACE:pn,CHAR_RIGHT_PARENTHESES:mr,CHAR_RIGHT_SQUARE_BRACKET:dn}=xe,Cr=s=>s===gr||s===je,Ar=s=>{s.isPrefix!==!0&&(s.depth=s.isGlobstar?1/0:1)};var Dn=(s,e)=>{const t=e||{},r=s.length-1,n=t.parts===!0||t.scanToEnd===!0,i=[],u=[],o=[];let a=s,c=-1,f=0,l=0,h=!1,C=!1,y=!1,w=!1,p=!1,E=!1,A=!1,v=!1,B=!1,k=!1,S=0,$,R,F={value:"",depth:0,isGlob:!1};const _=()=>c>=r,g=()=>a.charCodeAt(c+1),N=()=>($=R,a.charCodeAt(++c));for(;c<r;){R=N();let z;if(R===je){A=F.backslashes=!0,R=N(),R===_t&&(E=!0);continue}if(E===!0||R===_t){for(S++;_()!==!0&&(R=N());){if(R===je){A=F.backslashes=!0,N();continue}if(R===_t){S++;continue}if(E!==!0&&R===bt&&(R=N())===bt){if(h=F.isBrace=!0,y=F.isGlob=!0,k=!0,n===!0)continue;break}if(E!==!0&&R===ln){if(h=F.isBrace=!0,y=F.isGlob=!0,k=!0,n===!0)continue;break}if(R===pn&&(S--,S===0)){E=!1,h=F.isBrace=!0,k=!0;break}}if(n===!0)continue;break}if(R===gr){if(i.push(c),u.push(F),F={value:"",depth:0,isGlob:!1},k===!0)continue;if($===bt&&c===f+1){f+=2;continue}l=c+1;continue}if(t.noext!==!0&&(R===fn||R===cn||R===xt||R===Er||R===St)===!0&&g()===Bt){if(y=F.isGlob=!0,w=F.isExtglob=!0,k=!0,R===St&&c===f&&(B=!0),n===!0){for(;_()!==!0&&(R=N());){if(R===je){A=F.backslashes=!0,R=N();continue}if(R===mr){y=F.isGlob=!0,k=!0;break}}continue}break}if(R===xt){if($===xt&&(p=F.isGlobstar=!0),y=F.isGlob=!0,k=!0,n===!0)continue;break}if(R===Er){if(y=F.isGlob=!0,k=!0,n===!0)continue;break}if(R===hn){for(;_()!==!0&&(z=N());){if(z===je){A=F.backslashes=!0,N();continue}if(z===dn){C=F.isBracket=!0,y=F.isGlob=!0,k=!0;break}}if(n===!0)continue;break}if(t.nonegate!==!0&&R===St&&c===f){v=F.negated=!0,f++;continue}if(t.noparen!==!0&&R===Bt){if(y=F.isGlob=!0,n===!0){for(;_()!==!0&&(R=N());){if(R===Bt){A=F.backslashes=!0,R=N();continue}if(R===mr){k=!0;break}}continue}break}if(y===!0){if(k=!0,n===!0)continue;break}}t.noext===!0&&(w=!1,y=!1);let T=a,J="",D="";f>0&&(J=a.slice(0,f),a=a.slice(f),l-=f),T&&y===!0&&l>0?(T=a.slice(0,l),D=a.slice(l)):y===!0?(T="",D=a):T=a,T&&T!==""&&T!=="/"&&T!==a&&Cr(T.charCodeAt(T.length-1))&&(T=T.slice(0,-1)),t.unescape===!0&&(D&&(D=ee.removeBackslashes(D)),T&&A===!0&&(T=ee.removeBackslashes(T)));const d={prefix:J,input:s,start:f,base:T,glob:D,isBrace:h,isBracket:C,isGlob:y,isExtglob:w,isGlobstar:p,negated:v,negatedExtglob:B};if(t.tokens===!0&&(d.maxDepth=0,Cr(R)||u.push(F),d.tokens=u),t.parts===!0||t.tokens===!0){let z;for(let M=0;M<i.length;M++){const le=z?z+1:f,he=i[M],ne=s.slice(le,he);t.tokens&&(M===0&&f!==0?(u[M].isPrefix=!0,u[M].value=J):u[M].value=ne,Ar(u[M]),d.maxDepth+=u[M].depth),(M!==0||ne!=="")&&o.push(ne),z=he}if(z&&z+1<s.length){const M=s.slice(z+1);o.push(M),t.tokens&&(u[u.length-1].value=M,Ar(u[u.length-1]),d.maxDepth+=u[u.length-1].depth)}d.slashes=i,d.parts=o}return d};const{MAX_LENGTH:st,POSIX_REGEX_SOURCE:gn,REGEX_NON_SPECIAL_CHARS:En,REGEX_SPECIAL_CHARS_BACKREF:mn,REPLACEMENTS:Fr}=xe,Cn=(s,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...s,e);s.sort();const t=`[${s.join("-")}]`;try{new RegExp(t)}catch{return s.map(n=>ee.escapeRegex(n)).join("..")}return t},Oe=(s,e)=>`Missing ${s}: "${e}" - use "\\\\${e}" to match literal characters`,wr=(s,e)=>{if(typeof s!="string")throw new TypeError("Expected a string");s=Fr[s]||s;const t=Re({},e),r=typeof t.maxLength=="number"?Math.min(st,t.maxLength):st;let n=s.length;if(n>r)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${r}`);const i={type:"bos",value:"",output:t.prepend||""},u=[i],o=t.capture?"":"?:",a=ee.isWindows(e),c=xe.globChars(a),f=xe.extglobChars(c),{DOT_LITERAL:l,PLUS_LITERAL:h,SLASH_LITERAL:C,ONE_CHAR:y,DOTS_SLASH:w,NO_DOT:p,NO_DOT_SLASH:E,NO_DOTS_SLASH:A,QMARK:v,QMARK_NO_DOT:B,STAR:k,START_ANCHOR:S}=c,$=b=>`(${o}(?:(?!${S}${b.dot?w:l}).)*?)`,R=t.dot?"":p,F=t.dot?v:B;let _=t.bash===!0?$(t):k;t.capture&&(_=`(${_})`),typeof t.noext=="boolean"&&(t.noextglob=t.noext);const g={input:s,index:-1,start:0,dot:t.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:u};s=ee.removePrefix(s,g),n=s.length;const N=[],T=[],J=[];let D=i,d;const z=()=>g.index===n-1,M=g.peek=(b=1)=>s[g.index+b],le=g.advance=()=>s[++g.index]||"",he=()=>s.slice(g.index+1),ne=(b="",W=0)=>{g.consumed+=b,g.index+=W},ct=b=>{g.output+=b.output!=null?b.output:b.value,ne(b.value)},Eu=()=>{let b=1;for(;M()==="!"&&(M(2)!=="("||M(3)==="?");)le(),g.start++,b++;return b%2===0?!1:(g.negated=!0,g.start++,!0)},lt=b=>{g[b]++,J.push(b)},_e=b=>{g[b]--,J.pop()},H=b=>{if(D.type==="globstar"){const W=g.braces>0&&(b.type==="comma"||b.type==="brace"),x=b.extglob===!0||N.length&&(b.type==="pipe"||b.type==="paren");b.type!=="slash"&&b.type!=="paren"&&!W&&!x&&(g.output=g.output.slice(0,-D.output.length),D.type="star",D.value="*",D.output=_,g.output+=D.output)}if(N.length&&b.type!=="paren"&&(N[N.length-1].inner+=b.value),(b.value||b.output)&&ct(b),D&&D.type==="text"&&b.type==="text"){D.value+=b.value,D.output=(D.output||"")+b.value;return}b.prev=D,u.push(b),D=b},ht=(b,W)=>{const x=Ze(Re({},f[W]),{conditions:1,inner:""});x.prev=D,x.parens=g.parens,x.output=g.output;const P=(t.capture?"(":"")+x.open;lt("parens"),H({type:b,value:W,output:g.output?"":y}),H({type:"paren",extglob:!0,value:le(),output:P}),N.push(x)},mu=b=>{let W=b.close+(t.capture?")":""),x;if(b.type==="negate"){let P=_;b.inner&&b.inner.length>1&&b.inner.includes("/")&&(P=$(t)),(P!==_||z()||/^\)+$/.test(he()))&&(W=b.close=`)$))${P}`),b.inner.includes("*")&&(x=he())&&/^\.[^\\/.]+$/.test(x)&&(W=b.close=`)${x})${P})`),b.prev.type==="bos"&&(g.negatedExtglob=!0)}H({type:"paren",extglob:!0,value:d,output:W}),_e("parens")};if(t.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(s)){let b=!1,W=s.replace(mn,(x,P,X,se,Y,zt)=>se==="\\"?(b=!0,x):se==="?"?P?P+se+(Y?v.repeat(Y.length):""):zt===0?F+(Y?v.repeat(Y.length):""):v.repeat(X.length):se==="."?l.repeat(X.length):se==="*"?P?P+se+(Y?_:""):_:P?x:`\\${x}`);return b===!0&&(t.unescape===!0?W=W.replace(/\\/g,""):W=W.replace(/\\+/g,x=>x.length%2===0?"\\\\":x?"\\":"")),W===s&&t.contains===!0?(g.output=s,g):(g.output=ee.wrapOutput(W,g,e),g)}for(;!z();){if(d=le(),d==="\0")continue;if(d==="\\"){const x=M();if(x==="/"&&t.bash!==!0||x==="."||x===";")continue;if(!x){d+="\\",H({type:"text",value:d});continue}const P=/^\\+/.exec(he());let X=0;if(P&&P[0].length>2&&(X=P[0].length,g.index+=X,X%2!==0&&(d+="\\")),t.unescape===!0?d=le():d+=le(),g.brackets===0){H({type:"text",value:d});continue}}if(g.brackets>0&&(d!=="]"||D.value==="["||D.value==="[^")){if(t.posix!==!1&&d===":"){const x=D.value.slice(1);if(x.includes("[")&&(D.posix=!0,x.includes(":"))){const P=D.value.lastIndexOf("["),X=D.value.slice(0,P),se=D.value.slice(P+2),Y=gn[se];if(Y){D.value=X+Y,g.backtrack=!0,le(),!i.output&&u.indexOf(D)===1&&(i.output=y);continue}}}(d==="["&&M()!==":"||d==="-"&&M()==="]")&&(d=`\\${d}`),d==="]"&&(D.value==="["||D.value==="[^")&&(d=`\\${d}`),t.posix===!0&&d==="!"&&D.value==="["&&(d="^"),D.value+=d,ct({value:d});continue}if(g.quotes===1&&d!=='"'){d=ee.escapeRegex(d),D.value+=d,ct({value:d});continue}if(d==='"'){g.quotes=g.quotes===1?0:1,t.keepQuotes===!0&&H({type:"text",value:d});continue}if(d==="("){lt("parens"),H({type:"paren",value:d});continue}if(d===")"){if(g.parens===0&&t.strictBrackets===!0)throw new SyntaxError(Oe("opening","("));const x=N[N.length-1];if(x&&g.parens===x.parens+1){mu(N.pop());continue}H({type:"paren",value:d,output:g.parens?")":"\\)"}),_e("parens");continue}if(d==="["){if(t.nobracket===!0||!he().includes("]")){if(t.nobracket!==!0&&t.strictBrackets===!0)throw new SyntaxError(Oe("closing","]"));d=`\\${d}`}else lt("brackets");H({type:"bracket",value:d});continue}if(d==="]"){if(t.nobracket===!0||D&&D.type==="bracket"&&D.value.length===1){H({type:"text",value:d,output:`\\${d}`});continue}if(g.brackets===0){if(t.strictBrackets===!0)throw new SyntaxError(Oe("opening","["));H({type:"text",value:d,output:`\\${d}`});continue}_e("brackets");const x=D.value.slice(1);if(D.posix!==!0&&x[0]==="^"&&!x.includes("/")&&(d=`/${d}`),D.value+=d,ct({value:d}),t.literalBrackets===!1||ee.hasRegexChars(x))continue;const P=ee.escapeRegex(D.value);if(g.output=g.output.slice(0,-D.value.length),t.literalBrackets===!0){g.output+=P,D.value=P;continue}D.value=`(${o}${P}|${D.value})`,g.output+=D.value;continue}if(d==="{"&&t.nobrace!==!0){lt("braces");const x={type:"brace",value:d,output:"(",outputIndex:g.output.length,tokensIndex:g.tokens.length};T.push(x),H(x);continue}if(d==="}"){const x=T[T.length-1];if(t.nobrace===!0||!x){H({type:"text",value:d,output:d});continue}let P=")";if(x.dots===!0){const X=u.slice(),se=[];for(let Y=X.length-1;Y>=0&&(u.pop(),X[Y].type!=="brace");Y--)X[Y].type!=="dots"&&se.unshift(X[Y].value);P=Cn(se,t),g.backtrack=!0}if(x.comma!==!0&&x.dots!==!0){const X=g.output.slice(0,x.outputIndex),se=g.tokens.slice(x.tokensIndex);x.value=x.output="\\{",d=P="\\}",g.output=X;for(const Y of se)g.output+=Y.output||Y.value}H({type:"brace",value:d,output:P}),_e("braces"),T.pop();continue}if(d==="|"){N.length>0&&N[N.length-1].conditions++,H({type:"text",value:d});continue}if(d===","){let x=d;const P=T[T.length-1];P&&J[J.length-1]==="braces"&&(P.comma=!0,x="|"),H({type:"comma",value:d,output:x});continue}if(d==="/"){if(D.type==="dot"&&g.index===g.start+1){g.start=g.index+1,g.consumed="",g.output="",u.pop(),D=i;continue}H({type:"slash",value:d,output:C});continue}if(d==="."){if(g.braces>0&&D.type==="dot"){D.value==="."&&(D.output=l);const x=T[T.length-1];D.type="dots",D.output+=d,D.value+=d,x.dots=!0;continue}if(g.braces+g.parens===0&&D.type!=="bos"&&D.type!=="slash"){H({type:"text",value:d,output:l});continue}H({type:"dot",value:d,output:l});continue}if(d==="?"){if(!(D&&D.value==="(")&&t.noextglob!==!0&&M()==="("&&M(2)!=="?"){ht("qmark",d);continue}if(D&&D.type==="paren"){const P=M();let X=d;if(P==="<"&&!ee.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(D.value==="("&&!/[!=<:]/.test(P)||P==="<"&&!/<([!=]|\w+>)/.test(he()))&&(X=`\\${d}`),H({type:"text",value:d,output:X});continue}if(t.dot!==!0&&(D.type==="slash"||D.type==="bos")){H({type:"qmark",value:d,output:B});continue}H({type:"qmark",value:d,output:v});continue}if(d==="!"){if(t.noextglob!==!0&&M()==="("&&(M(2)!=="?"||!/[!=<:]/.test(M(3)))){ht("negate",d);continue}if(t.nonegate!==!0&&g.index===0){Eu();continue}}if(d==="+"){if(t.noextglob!==!0&&M()==="("&&M(2)!=="?"){ht("plus",d);continue}if(D&&D.value==="("||t.regex===!1){H({type:"plus",value:d,output:h});continue}if(D&&(D.type==="bracket"||D.type==="paren"||D.type==="brace")||g.parens>0){H({type:"plus",value:d});continue}H({type:"plus",value:h});continue}if(d==="@"){if(t.noextglob!==!0&&M()==="("&&M(2)!=="?"){H({type:"at",extglob:!0,value:d,output:""});continue}H({type:"text",value:d});continue}if(d!=="*"){(d==="$"||d==="^")&&(d=`\\${d}`);const x=En.exec(he());x&&(d+=x[0],g.index+=x[0].length),H({type:"text",value:d});continue}if(D&&(D.type==="globstar"||D.star===!0)){D.type="star",D.star=!0,D.value+=d,D.output=_,g.backtrack=!0,g.globstar=!0,ne(d);continue}let b=he();if(t.noextglob!==!0&&/^\([^?]/.test(b)){ht("star",d);continue}if(D.type==="star"){if(t.noglobstar===!0){ne(d);continue}const x=D.prev,P=x.prev,X=x.type==="slash"||x.type==="bos",se=P&&(P.type==="star"||P.type==="globstar");if(t.bash===!0&&(!X||b[0]&&b[0]!=="/")){H({type:"star",value:d,output:""});continue}const Y=g.braces>0&&(x.type==="comma"||x.type==="brace"),zt=N.length&&(x.type==="pipe"||x.type==="paren");if(!X&&x.type!=="paren"&&!Y&&!zt){H({type:"star",value:d,output:""});continue}for(;b.slice(0,3)==="/**";){const ft=s[g.index+4];if(ft&&ft!=="/")break;b=b.slice(3),ne("/**",3)}if(x.type==="bos"&&z()){D.type="globstar",D.value+=d,D.output=$(t),g.output=D.output,g.globstar=!0,ne(d);continue}if(x.type==="slash"&&x.prev.type!=="bos"&&!se&&z()){g.output=g.output.slice(0,-(x.output+D.output).length),x.output=`(?:${x.output}`,D.type="globstar",D.output=$(t)+(t.strictSlashes?")":"|$)"),D.value+=d,g.globstar=!0,g.output+=x.output+D.output,ne(d);continue}if(x.type==="slash"&&x.prev.type!=="bos"&&b[0]==="/"){const ft=b[1]!==void 0?"|$":"";g.output=g.output.slice(0,-(x.output+D.output).length),x.output=`(?:${x.output}`,D.type="globstar",D.output=`${$(t)}${C}|${C}${ft})`,D.value+=d,g.output+=x.output+D.output,g.globstar=!0,ne(d+le()),H({type:"slash",value:"/",output:""});continue}if(x.type==="bos"&&b[0]==="/"){D.type="globstar",D.value+=d,D.output=`(?:^|${C}|${$(t)}${C})`,g.output=D.output,g.globstar=!0,ne(d+le()),H({type:"slash",value:"/",output:""});continue}g.output=g.output.slice(0,-D.output.length),D.type="globstar",D.output=$(t),D.value+=d,g.output+=D.output,g.globstar=!0,ne(d);continue}const W={type:"star",value:d,output:_};if(t.bash===!0){W.output=".*?",(D.type==="bos"||D.type==="slash")&&(W.output=R+W.output),H(W);continue}if(D&&(D.type==="bracket"||D.type==="paren")&&t.regex===!0){W.output=d,H(W);continue}(g.index===g.start||D.type==="slash"||D.type==="dot")&&(D.type==="dot"?(g.output+=E,D.output+=E):t.dot===!0?(g.output+=A,D.output+=A):(g.output+=R,D.output+=R),M()!=="*"&&(g.output+=y,D.output+=y)),H(W)}for(;g.brackets>0;){if(t.strictBrackets===!0)throw new SyntaxError(Oe("closing","]"));g.output=ee.escapeLast(g.output,"["),_e("brackets")}for(;g.parens>0;){if(t.strictBrackets===!0)throw new SyntaxError(Oe("closing",")"));g.output=ee.escapeLast(g.output,"("),_e("parens")}for(;g.braces>0;){if(t.strictBrackets===!0)throw new SyntaxError(Oe("closing","}"));g.output=ee.escapeLast(g.output,"{"),_e("braces")}if(t.strictSlashes!==!0&&(D.type==="star"||D.type==="bracket")&&H({type:"maybe_slash",value:"",output:`${C}?`}),g.backtrack===!0){g.output="";for(const b of g.tokens)g.output+=b.output!=null?b.output:b.value,b.suffix&&(g.output+=b.suffix)}return g};wr.fastpaths=(s,e)=>{const t=Re({},e),r=typeof t.maxLength=="number"?Math.min(st,t.maxLength):st,n=s.length;if(n>r)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${r}`);s=Fr[s]||s;const i=ee.isWindows(e),{DOT_LITERAL:u,SLASH_LITERAL:o,ONE_CHAR:a,DOTS_SLASH:c,NO_DOT:f,NO_DOTS:l,NO_DOTS_SLASH:h,STAR:C,START_ANCHOR:y}=xe.globChars(i),w=t.dot?l:f,p=t.dot?h:f,E=t.capture?"":"?:",A={negated:!1,prefix:""};let v=t.bash===!0?".*?":C;t.capture&&(v=`(${v})`);const B=R=>R.noglobstar===!0?v:`(${E}(?:(?!${y}${R.dot?c:u}).)*?)`,k=R=>{switch(R){case"*":return`${w}${a}${v}`;case".*":return`${u}${a}${v}`;case"*.*":return`${w}${v}${u}${a}${v}`;case"*/*":return`${w}${v}${o}${a}${p}${v}`;case"**":return w+B(t);case"**/*":return`(?:${w}${B(t)}${o})?${p}${a}${v}`;case"**/*.*":return`(?:${w}${B(t)}${o})?${p}${v}${u}${a}${v}`;case"**/.*":return`(?:${w}${B(t)}${o})?${u}${a}${v}`;default:{const F=/^(.*?)\.(\w+)$/.exec(R);if(!F)return;const _=k(F[1]);return _?_+u+F[2]:void 0}}},S=ee.removePrefix(s,A);let $=k(S);return $&&t.strictSlashes!==!0&&($+=`${o}?`),$};var Rt=wr;const An=s=>s&&typeof s=="object"&&!Array.isArray(s),K=(s,e,t=!1)=>{if(Array.isArray(s)){const f=s.map(h=>K(h,e,t));return h=>{for(const C of f){const y=C(h);if(y)return y}return!1}}const r=An(s)&&s.tokens&&s.input;if(s===""||typeof s!="string"&&!r)throw new TypeError("Expected pattern to be a non-empty string");const n=e||{},i=ee.isWindows(e),u=r?K.compileRe(s,e):K.makeRe(s,e,!1,!0),o=u.state;delete u.state;let a=()=>!1;if(n.ignore){const f=Ze(Re({},e),{ignore:null,onMatch:null,onResult:null});a=K(n.ignore,f,t)}const c=(f,l=!1)=>{const{isMatch:h,match:C,output:y}=K.test(f,u,e,{glob:s,posix:i}),w={glob:s,state:o,regex:u,posix:i,input:f,output:y,match:C,isMatch:h};return typeof n.onResult=="function"&&n.onResult(w),h===!1?(w.isMatch=!1,l?w:!1):a(f)?(typeof n.onIgnore=="function"&&n.onIgnore(w),w.isMatch=!1,l?w:!1):(typeof n.onMatch=="function"&&n.onMatch(w),l?w:!0)};return t&&(c.state=o),c};K.test=(s,e,t,{glob:r,posix:n}={})=>{if(typeof s!="string")throw new TypeError("Expected input to be a string");if(s==="")return{isMatch:!1,output:""};const i=t||{},u=i.format||(n?ee.toPosixSlashes:null);let o=s===r,a=o&&u?u(s):s;return o===!1&&(a=u?u(s):s,o=a===r),(o===!1||i.capture===!0)&&(i.matchBase===!0||i.basename===!0?o=K.matchBase(s,e,t,n):o=e.exec(a)),{isMatch:Boolean(o),match:o,output:a}},K.matchBase=(s,e,t,r=ee.isWindows(t))=>(e instanceof RegExp?e:K.makeRe(e,t)).test(wt.basename(s)),K.isMatch=(s,e,t)=>K(e,t)(s),K.parse=(s,e)=>Array.isArray(s)?s.map(t=>K.parse(t,e)):Rt(s,Ze(Re({},e),{fastpaths:!1})),K.scan=(s,e)=>Dn(s,e),K.compileRe=(s,e,t=!1,r=!1)=>{if(t===!0)return s.output;const n=e||{},i=n.contains?"":"^",u=n.contains?"":"$";let o=`${i}(?:${s.output})${u}`;s&&s.negated===!0&&(o=`^(?!${o}).*$`);const a=K.toRegex(o,e);return r===!0&&(a.state=s),a},K.makeRe=(s,e={},t=!1,r=!1)=>{if(!s||typeof s!="string")throw new TypeError("Expected a non-empty string");let n={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(s[0]==="."||s[0]==="*")&&(n.output=Rt.fastpaths(s,e)),n.output||(n=Rt(s,e)),K.compileRe(n,e,t,r)},K.toRegex=(s,e)=>{try{const t=e||{};return new RegExp(s,t.flags||(t.nocase?"i":""))}catch(t){if(e&&e.debug===!0)throw t;return/$^/}},K.constants=xe;var Fn=K,wn=Fn;function kt(s,e){return Array.isArray(e)?e.some(t=>kt(s,t)):wn(e)(s)}function nt(s,e,t){var r,n;if(e===void 0)return;if(s.length===0)return t(e);if(typeof e!="object"||e===null)return;const i=s.shift();if(i==="**"){for(;s.length>0&&s[0]==="*";)s.shift();const u=["**",...s].join("/"),o=new Set;yr("",e,o);for(const a of o)kt(a,u)&&nt(a.split("/"),e,t)}else if(i.startsWith("*")){let u;i.length>=1&&(u=new RegExp((n=(r=i.match(/(\*{)(.+)(})/))==null?void 0:r[2])!=null?n:".*"));for(const o in e)u&&o.match(u)!==null&&nt([...s],e[o],t)}else nt(s,e[i],t)}function yr(s,e,t){for(const r in e)t.add(`${s}${r}`),typeof e[r]=="object"&&yr(`${s}${r}/`,e[r],t)}function vr(s,e,t){const r=s.length===0||s==="/"?[]:s.split("/");if(r.length===0)return;const n=r.pop();nt(r,e,i=>{if(typeof i=="object")if(n==="*")for(const u in i)i[u]=t(i[u]);else i[n]!==void 0&&(i[n]=t(i[n]))})}function Ue(s,e){if(Array.isArray(s)&&Array.isArray(e))return s.concat(e);if(Array.isArray(s))return s.concat([e]);if(Array.isArray(e))return e.concat([s]);if(typeof e!="object")return e;let t={};for(const r in s)e[r]===void 0?t[r]=s[r]:t[r]=Ue(s[r],e[r]);for(const r in e)s[r]===void 0&&(t[r]=e[r]);return t}function yn(s,e,t){if(e.length===0)return s;let r=s;for(let n=0;n<e.length;n++){if(r===void 0)return t;r=r[e[n]]}return r}function vn(s){return Array.from(s).map(e=>("00"+e.toString(16)).slice(-2)).join("")}async function xn(s){return new Uint8Array(await crypto.subtle.digest("sha-1",s))}const bn=new TextEncoder;async function $t(s){const e=bn.encode(s);if(!e)return"";const t=await xn(e);return vn(t)}function Sn(s){return s==="true"?!0:s==="false"?!1:s==="null"?null:s==="undefined"?void 0:_n(s)?Number(s):typeof s=="string"&&s.startsWith('"')&&s.endsWith('"')?s.slice(1,-1):s}function _n(s){return!isNaN(Number(s))}function xr(s){let e=0,t=0,r=!1,n=0,i=0,u="",o=[];for(;n<s.length;){if(s[n]==="^"&&u[0]==="^"||s[n]==="~"&&u[0]==="~")o.push({startColumn:i,endColumn:n,word:u}),i=n+1,u=s[n];else if(s[n]==='"')u+=s[n],r&&(o.push({startColumn:i,endColumn:n,word:u}),i=n+1,u=""),r=!r;else if(s[n]===" "||s[n]==="	"){if(r){u+=s[n],n++;continue}e===0&&t===0&&u!==""&&(o.push({startColumn:i,endColumn:n,word:u}),i=n+1,u="")}else s[n]==="{"?e++:s[n]==="}"?e--:s[n]==="["?t++:s[n]==="]"&&t--,s[n].trim()!==""&&(u+=s[n]);n++}return o.push({startColumn:i,endColumn:n,word:u}),{tokens:o}}const Bn={behaviorPack:"./BP",resourcePack:"./RP",skinPack:"./SP",worldTemplate:"./WT"};class Rn{constructor(e){this.basePath=e,this.data={}}async refreshConfig(){this.data=await this.readConfig()}async setup(){await this.refreshConfig()}get(){return this.data}getRelativePackRoot(e){var t,r;return(r=(t=this.data.packs)==null?void 0:t[e])!=null?r:Bn[e]}getAbsolutePackRoot(e){return this.resolvePackPath(e)}resolvePackPath(e,t){return!t&&!e?this.basePath:!e&&t?j.join(this.basePath,t):!t&&e?j.join(this.basePath,this.getRelativePackRoot(e)):j.join(this.basePath,`${this.getRelativePackRoot(e)}/${t}`)}getAvailablePackPaths(){var e;const t=[];for(const r of Object.keys((e=this.data.packs)!=null?e:{}))t.push(this.resolvePackPath(r));return t}getAvailablePacks(){var e;const t={};for(const r in(e=this.data.packs)!=null?e:{})t[r]=this.resolvePackPath(r);return t}async save(){await this.writeConfig(this.data)}}class kn extends Rn{constructor(e,t){super(j.dirname(t)),this.fileSystem=e,this.configPath=t}readConfig(){return this.fileSystem.readJson(this.configPath)}writeConfig(e){return this.fileSystem.writeJson(this.configPath,e)}}class br{constructor(e,t,r){this.dash=e,this.pluginId=t,this.plugin=r}async runBuildStartHook(){var e,t;try{return await((t=(e=this.plugin).buildStart)==null?void 0:t.call(e))}catch(r){this.dash.console.error(`The plugin "${this.pluginId}" threw an error while running the "buildStart" hook:`,r)}}async runIncludeHook(){var e,t;try{return await((t=(e=this.plugin).include)==null?void 0:t.call(e))}catch(r){this.dash.console.error(`The plugin "${this.pluginId}" threw an error while running the "include" hook:`,r)}}async runTransformPathHook(e){var t,r;try{return await((r=(t=this.plugin).transformPath)==null?void 0:r.call(t,e))}catch(n){this.dash.console.error(`The plugin "${this.pluginId}" threw an error while running the "transformPath" hook for "${e}":`,n)}}async runReadHook(e,t){var r,n;try{return await((n=(r=this.plugin).read)==null?void 0:n.call(r,e,t))}catch(i){this.dash.console.error(`The plugin "${this.pluginId}" threw an error while running the "read" hook for "${e}":`,i)}}async runLoadHook(e,t){var r,n;try{return await((n=(r=this.plugin).load)==null?void 0:n.call(r,e,t))}catch(i){this.dash.console.error(`The plugin "${this.pluginId}" threw an error while running the "load" hook for "${e}":`,i)}}async runRegisterAliasesHook(e,t){var r,n;try{return await((n=(r=this.plugin).registerAliases)==null?void 0:n.call(r,e,t))}catch(i){this.dash.console.error(`The plugin "${this.pluginId}" threw an error while running the "registerAliases" hook for "${e}":`,i)}}async runRequireHook(e,t){var r,n;try{return await((n=(r=this.plugin).require)==null?void 0:n.call(r,e,t))}catch(i){this.dash.console.error(`The plugin "${this.pluginId}" threw an error while running the "require" hook for "${e}":`,i)}}async runTransformHook(e,t,r){var n,i;try{return await((i=(n=this.plugin).transform)==null?void 0:i.call(n,e,t,r))}catch(u){this.dash.console.error(`The plugin "${this.pluginId}" threw an error while running the "transform" hook for "${e}":`,u)}}async runFinalizeBuildHook(e,t){var r,n;try{return await((n=(r=this.plugin).finalizeBuild)==null?void 0:n.call(r,e,t))}catch(i){this.dash.console.error(`The plugin "${this.pluginId}" threw an error while running the "finalizeBuild" hook for "${e}":`,i)}}async runBuildEndHook(){var e,t;try{return await((t=(e=this.plugin).buildEnd)==null?void 0:t.call(e))}catch(r){this.dash.console.error(`The plugin "${this.pluginId}" threw an error while running the "buildEnd" hook:`,r)}}}const $n=({options:s,outputFileSystem:e,hasComMojangDirectory:t,projectConfig:r,projectRoot:n,packType:i})=>{var c;s.buildName||(s.buildName=s.mode==="development"?"dev":"dist"),s.packName||(s.packName="Bridge"),(c=s.rewriteToComMojang)==null||c||(t=!1);const u={behaviorPack:"development_behavior_packs",resourcePack:"development_resource_packs",skinPack:"skin_packs",worldTemplate:"minecraftWorlds"},o=f=>t&&s.mode==="development"?`${u[f]}`:`${n}/builds/${s.buildName}`,a=(f,l)=>`${o(f)}/${s.packName} ${l}`;return{async buildStart(){if(s.mode==="production"||s.buildType==="fullBuild")if(t)for(const f in u){const l=i.getFromId(f);!l||await e.unlink(a(f,l.defaultPackPath)).catch(()=>{})}else await e.unlink(o("BP")).catch(()=>{})},transformPath(f){if(!f||f.includes("BP/scripts/gametests/")&&s.mode==="production")return;const l=i==null?void 0:i.get(f);if(!l)return;const h=r.getAbsolutePackRoot(l.id),C=j.relative(h,f);if(["behaviorPack","resourcePack","skinPack","worldTemplate"].includes(l.id))return j.join(a(l.id,l.defaultPackPath),C)}}},Tn={"!":"BANG","&":"AND","(":"LEFT_PARENT",")":"RIGHT_PARENT","*":"ASTERISK","+":"PLUS",",":"COMMA","-":"MINUS","/":"SLASH",":":"COLON",";":"SEMICOLON","<":"SMALLER","=":"EQUALS",">":"GREATER","?":"QUESTION","[":"ARRAY_LEFT","]":"ARRAY_RIGHT","{":"CURLY_LEFT","|":"OR","}":"CURLY_RIGHT"},Sr=new Set(["return","continue","break","for_each","loop","false","true"]);class Ge{constructor(e,t,r,n){this.type=e,this.text=t,this.startColumn=r,this.startLine=n}getType(){return this.type}getText(){return this.text}getPosition(){return{startColumn:this.startColumn,startLineNumber:this.startLine,endColumn:this.startColumn+this.text.length,endLineNumber:this.startLine}}}class _r{constructor(e){this.i=0,this.currentColumn=0,this.currentLine=0,this.lastColumns=0,this.keywordTokens=e?new Set([...Sr,...e]):Sr}init(e){this.currentLine=0,this.currentColumn=0,this.lastColumns=0,this.i=0,this.expression=e}next(){for(this.currentColumn=this.i-this.lastColumns;this.i<this.expression.length&&(this.expression[this.i]===" "||this.expression[this.i]==="	"||this.expression[this.i]===`
`);)this.expression[this.i]===`
`&&(this.currentLine++,this.currentColumn=0,this.lastColumns=this.i+1),this.i++;if(this.expression[this.i]==="#"){const t=this.expression.indexOf(`
`,this.i+1);return this.i=t===-1?this.expression.length:t,this.currentLine++,this.lastColumns=this.i+1,this.currentColumn=0,this.next()}let e=Tn[this.expression[this.i]];if(e)return new Ge(e,this.expression[this.i++],this.currentColumn,this.currentLine);if(this.isLetter(this.expression[this.i])||this.expression[this.i]==="_"){let t=this.i+1;for(;t<this.expression.length&&(this.isLetter(this.expression[t])||this.isNumber(this.expression[t])||this.expression[t]==="_"||this.expression[t]===".");)t++;const r=this.expression.substring(this.i,t).toLowerCase();return this.i=t,new Ge(this.keywordTokens.has(r)?r.toUpperCase():"NAME",r,this.currentColumn,this.currentLine)}if(this.isNumber(this.expression[this.i])||this.expression[this.i]==="."){let t=this.i+1,r=this.expression[this.i]===".";for(;t<this.expression.length&&(this.isNumber(this.expression[t])||this.expression[t]==="."&&!r);)this.expression[t]==="."&&(r=!0),t++;const n=new Ge("NUMBER",this.expression.substring(this.i,t),this.currentColumn,this.currentLine),i=r&&this.expression[t]==="f";return this.i=i?t+1:t,n}if(this.expression[this.i]==="'"){let t=this.i+1;for(;t<this.expression.length&&this.expression[t]!=="'";)t++;t++;const r=new Ge("STRING",this.expression.substring(this.i,t),this.currentColumn,this.currentLine);return this.i=t,r}return this.hasNext()?(this.i++,this.next()):new Ge("EOF","",this.currentColumn,this.currentLine)}hasNext(){return this.i<this.expression.length}isLetter(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}isNumber(e){return e>="0"&&e<="9"}}const On=(s,e,t)=>typeof s!="number"||Number.isNaN(s)?e:s>t?t:s<e?e:s,Nn=(s,e,t)=>{let r=0;for(;0<s;)r+=Br(e,t);return r},In=(s,e,t)=>{let r=0;for(;0<s;)r+=Rr(e,t);return r},Pn=s=>3*s**2-2*s**3,Ln=(s,e,t)=>(t<0?t=0:t>1&&(t=1),s+(e-s)*t),Hn=(s,e,t)=>{const r=n=>((n+180)%360+180)%360;if((s=r(s))>(e=r(e))){let n=s;s=e,e=n}return e-s>180?r(e+t*(360-(e-s))):s+t*(e-s)},Mn=(s,e)=>s%e,Br=(s,e)=>s+Math.random()*(e-s),Rr=(s,e)=>Math.round(s+Math.random()*(e-s)),jn=s=>((s=((s%=360)+360)%360)>179&&(s-=360),s),Un=s=>{const e=s?1:Math.PI/180;return{"math.abs":Math.abs,"math.acos":t=>Math.acos(t)/e,"math.asin":t=>Math.asin(t)/e,"math.atan":t=>Math.atan(t)/e,"math.atan2":(t,r)=>Math.atan2(t,r)/e,"math.ceil":Math.ceil,"math.clamp":On,"math.cos":t=>Math.cos(t*e),"math.die_roll":Nn,"math.die_roll_integer":In,"math.exp":Math.exp,"math.floor":Math.floor,"math.hermite_blend":Pn,"math.lerp":Ln,"math.lerp_rotate":Hn,"math.ln":Math.log,"math.max":Math.max,"math.min":Math.min,"math.min_angle":jn,"math.mod":Mn,"math.pi":Math.PI,"math.pow":Math.pow,"math.random":Br,"math.random_integer":Rr,"math.round":Math.round,"math.sin":t=>Math.sin(t*e),"math.sqrt":Math.sqrt,"math.trunc":Math.trunc}},Gn={"query.in_range":(s,e,t)=>typeof s!="number"||typeof e!="number"||typeof t!="number"?(console.error('"query.in_range": value, min and max must be numbers'),!1):s>=e&&s<=t,"query.all":(s,...e)=>e.every(t=>t===s),"query.any":(s,...e)=>e.some(t=>t===s),"query.count":s=>Array.isArray(s)?s.length:1},kr=s=>({...Un(s),...Gn});class Tt{constructor(e,t){var r;if(this.config=t,!e)throw new Error("Provided environment must be an object");this.env={...kr((r=t.useRadians)!=null?r:!1),"query.self":()=>this.env,...t.isFlat?e:this.flattenEnv(e)}}updateConfig({variableHandler:e,convertUndefined:t,useRadians:r}){t!==void 0&&(this.config.convertUndefined=t),typeof e=="function"&&(this.config.variableHandler=e),!!this.config.useRadians!=!!r&&(this.env=Object.assign(this.env,kr(!!r)))}get(){return this.env}flattenEnv(e,t="",r={}){for(let n in e){let i=n;if(n[1]===".")switch(n[0]){case"q":i="query"+n.substring(1,n.length);break;case"t":i="temp"+n.substring(1,n.length);break;case"v":i="variable"+n.substring(1,n.length);break;case"c":i="context"+n.substring(1,n.length);break;case"f":i="function"+n.substring(1,n.length)}e[n].__isContext?r[`${t}${i}`]=e[n].env:typeof e[n]!="object"||Array.isArray(e[n])?r[`${t}${i}`]=e[n]:this.flattenEnv(e[n],`${t}${n}.`,r)}return r}setAt(e,t){if(e[1]===".")switch(e[0]){case"q":e="query"+e.substring(1,e.length);break;case"t":e="temp"+e.substring(1,e.length);break;case"v":e="variable"+e.substring(1,e.length);break;case"c":e="context"+e.substring(1,e.length);break;case"f":e="function"+e.substring(1,e.length)}return this.env[e]=t}getFrom(e){var r,n,i;if(e[1]===".")switch(e[0]){case"q":e="query"+e.substring(1,e.length);break;case"t":e="temp"+e.substring(1,e.length);break;case"v":e="variable"+e.substring(1,e.length);break;case"c":e="context"+e.substring(1,e.length);break;case"f":e="function"+e.substring(1,e.length)}const t=(i=this.env[e])!=null?i:(n=(r=this.config).variableHandler)==null?void 0:n.call(r,e,this.env);return t===void 0&&this.config.convertUndefined?0:t}}class Q{toString(){return""+this.eval()}walk(e,t=new Set){var n;let r=(n=e(this))!=null?n:this;return r.iterate(e,t),r}iterate(e,t){var r;for(let n=0;n<this.allExpressions.length;n++){const i=this.allExpressions[n];if(t.has(i))continue;t.add(i);const u=(r=e(i))!=null?r:i;u!==i&&t.has(u)||(t.add(u),this.setExpressionAt(n,u),u.iterate(e,t))}}some(e){return this.allExpressions.some(t=>e(t)||t.some(e))}}class Ne extends Q{constructor(){super(...arguments),this.type="VoidExpression"}get allExpressions(){return[]}setExpressionAt(){}isStatic(){return!0}eval(){return 0}toString(){return""}}class te extends Q{constructor(e,t,r,n){super(),this.left=e,this.right=t,this.operator=r,this.evalHelper=n,this.type="GenericOperatorExpression"}get allExpressions(){return[this.left,this.right]}setExpressionAt(e,t){e===0?this.left=t:e===1&&(this.right=t)}isStatic(){return this.left.isStatic()&&this.right.isStatic()}eval(){return this.evalHelper(this.left,this.right)}toString(){return`${this.left.toString()}${this.operator}${this.right.toString()}`}}const qn=(s,e)=>{const t=s.eval(),r=e.eval();if(typeof t!="number"&&typeof t!="boolean"||typeof r!="number"&&typeof r!="boolean")throw new Error(`Cannot use numeric operators for expression "${t} + ${r}"`);return t+r},zn=(s,e)=>{const t=s.eval(),r=e.eval();if(typeof t!="number"&&typeof t!="boolean"||typeof r!="number"&&typeof r!="boolean")throw new Error(`Cannot use numeric operators for expression "${t} - ${r}"`);return t-r},Wn=(s,e)=>{const t=s.eval(),r=e.eval();if(typeof t!="number"&&typeof t!="boolean"||typeof r!="number"&&typeof r!="boolean")throw new Error(`Cannot use numeric operators for expression "${t} / ${r}"`);return t/r},Jn=(s,e)=>{const t=s.eval(),r=e.eval();if(typeof t!="number"&&typeof t!="boolean"||typeof r!="number"&&typeof r!="boolean")throw new Error(`Cannot use numeric operators for expression "${t} * ${r}"`);return t*r},Vn=(s,e)=>{if(s.setPointer)return s.setPointer(e.eval()),0;throw Error("Cannot assign to "+s.type)};class qe{constructor(e=0){this.precedence=e}parse(e,t,r){const n=e.parseExpression(this.precedence),i=r.getText();switch(i){case"+":return new te(t,n,i,qn);case"-":return new te(t,n,i,zn);case"*":return new te(t,n,i,Jn);case"/":return new te(t,n,i,Wn);case"=":return new te(t,n,"=",Vn);default:throw new Error("Operator not implemented")}}}var q;(function(s){s[s.SCOPE=1]="SCOPE",s[s.STATEMENT=2]="STATEMENT",s[s.ASSIGNMENT=3]="ASSIGNMENT",s[s.CONDITIONAL=4]="CONDITIONAL",s[s.ARRAY_ACCESS=5]="ARRAY_ACCESS",s[s.NULLISH_COALESCING=6]="NULLISH_COALESCING",s[s.AND=7]="AND",s[s.OR=8]="OR",s[s.EQUALS_COMPARE=9]="EQUALS_COMPARE",s[s.COMPARE=10]="COMPARE",s[s.SUM=11]="SUM",s[s.PRODUCT=12]="PRODUCT",s[s.EXPONENT=13]="EXPONENT",s[s.PREFIX=14]="PREFIX",s[s.POSTFIX=15]="POSTFIX",s[s.FUNCTION=16]="FUNCTION"})(q||(q={}));class $r extends Q{constructor(e,t){super(),this.tokenType=e,this.expression=t,this.type="PrefixExpression"}get allExpressions(){return[this.expression]}setExpressionAt(e,t){this.expression=t}isStatic(){return this.expression.isStatic()}eval(){const e=this.expression.eval();if(typeof e!="number")throw new Error(`Cannot use "${this.tokenType}" operator in front of ${typeof e} "${e}"`);switch(this.tokenType){case"MINUS":return-e;case"BANG":return!e}}toString(){switch(this.tokenType){case"MINUS":return"-"+this.expression.toString();case"BANG":return"!"+this.expression.toString()}throw new Error(`Unknown prefix operator: "${this.tokenType}"`)}}class Tr{constructor(e=0){this.precedence=e}parse(e,t){return new $r(t.getType(),e.parseExpression(this.precedence))}}class Ot extends Q{constructor(e){super(),this.value=e,this.type="NumberExpression"}get allExpressions(){return[]}setExpressionAt(){}isStatic(){return!0}eval(){return this.value}toString(){const e=""+this.value;return e.startsWith("0.")?e.slice(1):e}}class Kn{constructor(e=0){this.precedence=e}parse(e,t){return new Ot(Number(t.getText()))}}class ze extends Q{constructor(e,t,r=!1){super(),this.executionEnv=e,this.name=t,this.isFunctionCall=r,this.type="NameExpression"}get allExpressions(){return[]}setExpressionAt(){}isStatic(){return!1}setPointer(e){this.executionEnv.setAt(this.name,e)}setFunctionCall(e=!0){this.isFunctionCall=e}setName(e){this.name=e}setExecutionEnv(e){this.executionEnv=e}eval(){const e=this.executionEnv.getFrom(this.name);return this.isFunctionCall||typeof e!="function"?e:e()}toString(){return this.name}}class Qn extends Q{constructor(e,t){super(),this.leftExpr=e,this.rightExpr=t,this.type="NameExpression"}get allExpressions(){return[this.leftExpr,this.rightExpr]}setExpressionAt(e,t){if(!(t instanceof ze))throw new Error('Cannot use context switch operator "->" on '+t.type);e===0?this.leftExpr=t:e===1&&(this.rightExpr=t)}isStatic(){return!1}eval(){const e=this.leftExpr.eval();return typeof e!="object"?0:(this.rightExpr.setExecutionEnv(new Tt(e,this.rightExpr.executionEnv.config)),this.rightExpr.eval())}toString(){return`${this.leftExpr.toString()}->${this.rightExpr.toString()}`}}class Xn{constructor(e=0){this.precedence=e}parse(e,t){const r=new ze(e.executionEnv,t.getText()),n=[e.lookAhead(0),e.lookAhead(1)];if(n[0].getType()==="MINUS"&&n[1].getType()==="GREATER"){e.consume("MINUS"),e.consume("GREATER");const i=e.parseExpression(q.FUNCTION-1);if(i.type!=="NameExpression"&&i.type!=="FunctionExpression")throw new Error('Cannot use context switch operator "->" on '+i.type);return new Qn(r,i)}return r}}class Ee extends Q{constructor(e,t){super(),this.expression=e,this.brackets=t,this.type="GroupExpression"}get allExpressions(){return[this.expression]}setExpressionAt(e,t){this.expression=t}isStatic(){return this.expression.isStatic()}get isReturn(){return this.expression.isReturn}get isBreak(){return this.expression.isBreak}get isContinue(){return this.expression.isContinue}eval(){return this.expression.eval()}toString(){return`${this.brackets[0]}${this.expression.toString()}${this.brackets[1]}`}}class Yn{constructor(e=0){this.precedence=e}parse(e,t){const r=e.parseExpression(this.precedence);return e.consume("RIGHT_PARENT"),e.config.keepGroups?new Ee(r,"()"):r}}class be extends Q{constructor(e){super(),this.expression=e,this.type="ReturnExpression",this.isReturn=!0}get allExpressions(){return[this.expression]}setExpressionAt(e,t){this.expression=t}isStatic(){return!1}eval(){return this.expression.eval()}toString(){return"return "+this.expression.toString()}}class Zn{constructor(e=0){this.precedence=e}parse(e,t){const r=e.parseExpression(q.STATEMENT+1);return new be(e.match("SEMICOLON",!1)?r:new Ot(0))}}class Se extends Q{constructor(e,t=!1){super(),this.value=e,this.isReturn=t,this.type="StaticExpression"}get allExpressions(){return[]}setExpressionAt(){}isStatic(){return!0}eval(){return this.value}toString(){let e=this.value;return typeof e=="string"&&(e=`'${e}'`),this.isReturn?"return "+e:""+e}}class ue extends Q{constructor(e){super(),this.expressions=e,this.type="StatementExpression",this.didReturn=void 0,this.wasLoopBroken=!1,this.wasLoopContinued=!1}get allExpressions(){return this.expressions}setExpressionAt(e,t){this.expressions[e]=t}get isReturn(){if(this.didReturn!==void 0)return this.didReturn;let e=0;for(;e<this.expressions.length;){const t=this.expressions[e];if(t.isBreak||t.isContinue)return!1;if(t.isReturn)return this.didReturn=!0,!0;e++}return this.didReturn=!1,!1}get isBreak(){return!!this.wasLoopBroken&&(this.wasLoopBroken=!1,!0)}get isContinue(){return!!this.wasLoopContinued&&(this.wasLoopContinued=!1,!0)}isStatic(){let e=0;for(;e<this.expressions.length;){if(!this.expressions[e].isStatic())return!1;e++}return!0}eval(){this.didReturn=!1,this.wasLoopBroken=!1,this.wasLoopContinued=!1;let e=0;for(;e<this.expressions.length;){let t=this.expressions[e].eval();if(this.expressions[e].isReturn)return this.didReturn=!0,t;if(this.expressions[e].isContinue)return void(this.wasLoopContinued=!0);if(this.expressions[e].isBreak)return void(this.wasLoopBroken=!0);e++}return 0}toString(){let e="";for(const t of this.expressions){if(t instanceof Ne||t instanceof Se&&!t.isReturn)continue;const r=t.toString();r&&(e+=r+";")}return e}}class ei{constructor(e=0){this.precedence=e}findReEntryPoint(e){let t=1,r=e.lookAhead(0).getType();for(;r!=="EOF"&&(r=="CURLY_RIGHT"?t--:r==="CURLY_LEFT"&&t++,t!==0);)e.consume(),r=e.lookAhead(0).getType()}parse(e,t,r){if(e.config.useOptimizer&&(t.isStatic()&&(t=new Se(t.eval(),t.isReturn)),e.config.earlyReturnsSkipParsing&&t.isReturn))return e.config.earlyReturnsSkipTokenization||this.findReEntryPoint(e),new ue([t]);const n=[t];if(!e.match("CURLY_RIGHT",!1))do{let i=e.parseExpression(this.precedence);if(e.config.useOptimizer){if(i.isStatic()){if(e.config.useAgressiveStaticOptimizer&&!i.isReturn)continue;i=new Se(i.eval(),i.isReturn)}if(e.config.earlyReturnsSkipParsing&&(i.isBreak||i.isContinue||i.isReturn))return n.push(i),e.config.earlyReturnsSkipTokenization||this.findReEntryPoint(e),new ue(n)}n.push(i)}while(e.match("SEMICOLON")&&!e.match("EOF")&&!e.match("CURLY_RIGHT",!1));return e.match("SEMICOLON"),new ue(n)}}class it extends Q{constructor(e){super(),this.name=e,this.type="StringExpression"}get allExpressions(){return[]}setExpressionAt(){}isStatic(){return!0}eval(){return this.name.substring(1,this.name.length-1)}toString(){return this.name}}class ti{constructor(e=0){this.precedence=e}parse(e,t){return new it(t.getText())}}class Or extends Q{constructor(e,t){super(),this.name=e,this.args=t,this.type="FunctionExpression"}get allExpressions(){return[this.name,...this.args]}setExpressionAt(e,t){e===0?this.name=t:e>0&&(this.args[e-1]=t)}setExecutionEnv(e){this.name.setExecutionEnv(e)}get executionEnv(){return this.name.executionEnv}isStatic(){return!1}eval(){const e=[];let t=0;for(;t<this.args.length;)e.push(this.args[t++].eval());const r=this.name.eval();if(typeof r!="function")throw new Error(this.name.toString()+" is not callable!");return r(...e)}toString(){let e=this.name.toString()+"(";for(let t=0;t<this.args.length;t++)e+=`${this.args[t].toString()}${t+1<this.args.length?",":""}`;return e+")"}}class ri{constructor(e=0){this.precedence=e}parse(e,t,r){const n=[];if(!t.setFunctionCall)throw new Error(t.type+" is not callable!");if(t.setFunctionCall(!0),!e.match("RIGHT_PARENT")){do n.push(e.parseExpression());while(e.match("COMMA"));e.consume("RIGHT_PARENT")}return new Or(t,n)}}class Nr extends Q{constructor(e,t){super(),this.name=e,this.lookup=t,this.type="ArrayAccessExpression"}get allExpressions(){return[this.name,this.lookup]}setExpressionAt(e,t){e===0?this.name=t:e===1&&(this.lookup=t)}isStatic(){return!1}setPointer(e){this.name.eval()[this.lookup.eval()]=e}eval(){return this.name.eval()[this.lookup.eval()]}toString(){return`${this.name.toString()}[${this.lookup.toString()}]`}}class si{constructor(e=0){this.precedence=e}parse(e,t,r){const n=e.parseExpression(this.precedence-1);if(!t.setPointer)throw new Error(`"${t.type}" is not an array`);if(!e.match("ARRAY_RIGHT"))throw new Error(`No closing bracket for opening bracket "[${n.eval()}"`);return new Nr(t,n)}}class ni{constructor(e=0){this.precedence=e}parse(e,t){let r=e.parseExpression(this.precedence);return e.config.useOptimizer&&e.config.earlyReturnsSkipTokenization&&r.isReturn?e.match("CURLY_RIGHT"):e.consume("CURLY_RIGHT"),e.config.keepGroups?new Ee(r,"{}"):r}}class Ir extends Q{constructor(e,t){super(),this.count=e,this.expression=t,this.type="LoopExpression"}get allExpressions(){return[this.count,this.expression]}get isNoopLoop(){return this.count.isStatic()&&this.count.eval()===0}setExpressionAt(e,t){e===0?this.count=t:e===1&&(this.expression=t)}get isReturn(){return!this.isNoopLoop&&this.expression.isReturn}isStatic(){return this.count.isStatic()&&this.expression.isStatic()}eval(){const e=Number(this.count.eval());if(e===0)return 0;if(Number.isNaN(e))throw new Error(`First loop() argument must be of type number, received "${typeof this.count.eval()}"`);if(e>1024)throw new Error(`Cannot loop more than 1024x times, received "${e}"`);let t=0;for(;t<e;){t++;const r=this.expression.eval();if(this.expression.isBreak)break;if(!this.expression.isContinue&&this.expression.isReturn)return r}return 0}toString(){return this.isNoopLoop?"":`loop(${this.count.toString()},${this.expression.toString()})`}}class ii{constructor(e=0){this.precedence=e}parse(e,t){e.consume("LEFT_PARENT");const r=[];if(e.match("RIGHT_PARENT"))throw new Error("loop() called without arguments");do r.push(e.parseExpression());while(e.match("COMMA"));if(e.consume("RIGHT_PARENT"),r.length!==2)throw new Error("There must be exactly two loop() arguments; found "+r.length);return new Ir(r[0],r[1])}}class Pr extends Q{constructor(e,t,r){if(super(),this.variable=e,this.arrayExpression=t,this.expression=r,this.type="ForEachExpression",!this.variable.setPointer)throw new Error(`First for_each() argument must be a variable, received "${typeof this.variable.eval()}"`)}get isReturn(){return this.expression.isReturn}get allExpressions(){return[this.variable,this.arrayExpression,this.expression]}setExpressionAt(e,t){e===0?this.variable=t:e===1?this.arrayExpression=t:e===2&&(this.expression=t)}isStatic(){return this.variable.isStatic()&&this.arrayExpression.isStatic()&&this.expression.isStatic()}eval(){var r,n;const e=this.arrayExpression.eval();if(!Array.isArray(e))throw new Error(`Second for_each() argument must be an array, received "${typeof e}"`);let t=0;for(;t<e.length;){(n=(r=this.variable).setPointer)==null||n.call(r,e[t++]);const i=this.expression.eval();if(this.expression.isBreak)break;if(!this.expression.isContinue&&this.expression.isReturn)return i}return 0}toString(){return`for_each(${this.variable.toString()},${this.arrayExpression.toString()},${this.expression.toString()})`}}class ui{constructor(e=0){this.precedence=e}parse(e,t){e.consume("LEFT_PARENT");const r=[];if(e.match("RIGHT_PARENT"))throw new Error("for_each() called without arguments");do r.push(e.parseExpression());while(e.match("COMMA"));if(e.consume("RIGHT_PARENT"),r.length!==3)throw new Error("There must be exactly three for_each() arguments; found "+r.length);return new Pr(r[0],r[1],r[2])}}class Lr extends Q{constructor(){super(),this.type="ContinueExpression",this.isContinue=!0}get allExpressions(){return[]}setExpressionAt(){}isStatic(){return!1}eval(){return 0}toString(){return"continue"}}class oi{constructor(e=0){this.precedence=e}parse(e,t){return new Lr}}class Hr extends Q{constructor(){super(),this.type="BreakExpression",this.isBreak=!0}get allExpressions(){return[]}setExpressionAt(){}isStatic(){return!1}eval(){return 0}isString(){return"break"}}class ai{constructor(e=0){this.precedence=e}parse(e,t){return new Hr}}class Mr extends Q{constructor(e){super(),this.value=e,this.type="BooleanExpression"}get allExpressions(){return[]}setExpressionAt(){}isStatic(){return!0}eval(){return this.value}}class jr{constructor(e=0){this.precedence=e}parse(e,t){return new Mr(t.getText()==="true")}}class ci{constructor(e=0){this.precedence=e}parse(e,t,r){return new te(t,e.parseExpression(this.precedence),"==",(n,i)=>n.eval()===i.eval())}}class li{constructor(e=0){this.precedence=e}parse(e,t,r){if(e.match("EQUALS"))return new te(t,e.parseExpression(this.precedence),"!=",(n,i)=>n.eval()!==i.eval());throw new Error("! was used as a binary operator")}}class hi{constructor(e=0){this.precedence=e}parse(e,t,r){if(e.match("AND"))return new te(t,e.parseExpression(this.precedence),"&&",(n,i)=>n.eval()&&i.eval());throw new Error('"&" not followed by another "&"')}}class fi{constructor(e=0){this.precedence=e}parse(e,t,r){if(e.match("OR"))return new te(t,e.parseExpression(this.precedence),"||",(n,i)=>n.eval()||i.eval());throw new Error('"|" not followed by another "|"')}}class pi{constructor(e=0){this.precedence=e}parse(e,t,r){return e.match("EQUALS")?new te(t,e.parseExpression(this.precedence),"<=",(n,i)=>n.eval()<=i.eval()):new te(t,e.parseExpression(this.precedence),"<",(n,i)=>n.eval()<i.eval())}}class di{constructor(e=0){this.precedence=e}parse(e,t,r){return e.match("EQUALS")?new te(t,e.parseExpression(this.precedence),">=",(n,i)=>n.eval()>=i.eval()):new te(t,e.parseExpression(this.precedence),">",(n,i)=>n.eval()>i.eval())}}class Nt extends Q{constructor(e,t,r){super(),this.leftExpression=e,this.thenExpression=t,this.elseExpression=r,this.type="TernaryExpression"}get allExpressions(){return this.leftExpression.isStatic()?[this.leftExpression,this.leftExpression.eval()?this.thenExpression:this.elseExpression]:[this.leftExpression,this.thenExpression,this.elseExpression]}setExpressionAt(e,t){e===0?this.leftExpression=t:e===1?this.thenExpression=t:e===2&&(this.elseExpression=t)}get isReturn(){return this.leftResult===void 0?this.thenExpression.isReturn&&this.elseExpression.isReturn:this.leftResult?this.thenExpression.isReturn:this.elseExpression.isReturn}get hasReturn(){return this.thenExpression.isReturn||this.elseExpression.isReturn}get isContinue(){return this.leftResult===void 0?this.thenExpression.isContinue&&this.elseExpression.isContinue:this.leftResult?this.thenExpression.isContinue:this.elseExpression.isContinue}get isBreak(){return this.leftResult===void 0?this.thenExpression.isBreak&&this.elseExpression.isBreak:this.leftResult?this.thenExpression.isBreak:this.elseExpression.isBreak}isStatic(){return this.leftExpression.isStatic()&&this.thenExpression.isStatic()&&this.elseExpression.isStatic()}eval(){return this.leftResult=this.leftExpression.eval(),this.leftResult?this.thenExpression.eval():this.elseExpression.eval()}toString(){return this.elseExpression instanceof Ne?`${this.leftExpression.toString()}?${this.thenExpression.toString()}`:`${this.leftExpression.toString()}?${this.thenExpression.toString()}:${this.elseExpression.toString()}`}}const Di=new class{constructor(s=0){this.precedence=s,this.exprName="Ternary"}parse(s,e,t){let r,n=s.parseExpression(this.precedence-1);return r=s.match("COLON")?s.parseExpression(this.precedence-1):new Ne,s.config.useOptimizer&&e.isStatic()?e.eval()?n:r:new Nt(e,n,r)}}(q.CONDITIONAL);class gi{constructor(e=0){this.precedence=e}parse(e,t,r){return e.match("QUESTION")?new te(t,e.parseExpression(this.precedence),"??",(n,i)=>{var u;return(u=n.eval())!=null?u:i.eval()}):Di.parse(e,t,r)}}class Ur extends class{constructor(e){this.config=e,this.prefixParselets=new Map,this.infixParselets=new Map,this.readTokens=[],this.tokenIterator=new _r}updateConfig(e){this.config=e}init(e){this.tokenIterator.init(e),this.readTokens=[]}setTokenizer(e){this.tokenIterator=e}setExecutionEnvironment(e){this.executionEnv=e}parseExpression(e=0){let t=this.consume();if(t.getType()==="EOF")return new Ne;const r=this.prefixParselets.get(t.getType());if(!r)throw new Error(`Cannot parse ${t.getType()} expression "${t.getType()}"`);let n=r.parse(this,t);return this.parseInfixExpression(n,e)}parseInfixExpression(e,t=0){let r;for(;this.getPrecedence()>t;){r=this.consume();let n=r.getType();n!=="EQUALS"||this.match("EQUALS")||(n="ASSIGN");const i=this.infixParselets.get(n);if(!i)throw new Error(`Unknown infix parselet: "${n}"`);e=i.parse(this,e,r)}return e}getPrecedence(){var t;const e=this.infixParselets.get(this.lookAhead(0).getType());return(t=e==null?void 0:e.precedence)!=null?t:0}consume(e){const t=this.lookAhead(0);if(e&&t.getType()!==e)throw new Error(`Expected token "${e}" and found "${t.getType()}"`);return this.readTokens.shift(),t}match(e,t=!0){return this.lookAhead(0).getType()===e&&(t&&this.consume(),!0)}lookAhead(e){for(;e>=this.readTokens.length;)this.readTokens.push(this.tokenIterator.next());return this.readTokens[e]}registerInfix(e,t){this.infixParselets.set(e,t)}registerPrefix(e,t){this.prefixParselets.set(e,t)}getInfix(e){return this.infixParselets.get(e)}getPrefix(e){return this.prefixParselets.get(e)}}{constructor(e){super(e),this.registerPrefix("NAME",new Xn),this.registerPrefix("STRING",new ti),this.registerPrefix("NUMBER",new Kn),this.registerPrefix("TRUE",new jr(q.PREFIX)),this.registerPrefix("FALSE",new jr(q.PREFIX)),this.registerPrefix("RETURN",new Zn),this.registerPrefix("CONTINUE",new oi),this.registerPrefix("BREAK",new ai),this.registerPrefix("LOOP",new ii),this.registerPrefix("FOR_EACH",new ui),this.registerInfix("QUESTION",new gi(q.CONDITIONAL)),this.registerPrefix("LEFT_PARENT",new Yn),this.registerInfix("LEFT_PARENT",new ri(q.FUNCTION)),this.registerInfix("ARRAY_LEFT",new si(q.ARRAY_ACCESS)),this.registerPrefix("CURLY_LEFT",new ni(q.SCOPE)),this.registerInfix("SEMICOLON",new ei(q.STATEMENT)),this.registerPrefix("MINUS",new Tr(q.PREFIX)),this.registerPrefix("BANG",new Tr(q.PREFIX)),this.registerInfix("PLUS",new qe(q.SUM)),this.registerInfix("MINUS",new qe(q.SUM)),this.registerInfix("ASTERISK",new qe(q.PRODUCT)),this.registerInfix("SLASH",new qe(q.PRODUCT)),this.registerInfix("EQUALS",new ci(q.EQUALS_COMPARE)),this.registerInfix("BANG",new li(q.EQUALS_COMPARE)),this.registerInfix("GREATER",new di(q.COMPARE)),this.registerInfix("SMALLER",new pi(q.COMPARE)),this.registerInfix("AND",new hi(q.AND)),this.registerInfix("OR",new fi(q.OR)),this.registerInfix("ASSIGN",new qe(q.ASSIGNMENT))}}class Ei{constructor(e=0){this.precedence=e}parse(e,t){if(e.consume("LEFT_PARENT"),e.match("RIGHT_PARENT"))throw new Error("function() called without arguments");let r,n,i=[];do{const u=e.parseExpression();if(u instanceof it)n?i.push(u.eval()):n=u.eval();else{if(!(u instanceof ue||u instanceof Ee))throw new Error(`Unexpected expresion: found "${u.constructor.name}"`);r=u}}while(e.match("COMMA"));if(e.consume("RIGHT_PARENT"),!n)throw new Error(`Missing function() name (argument 1); found "${n}"`);if(!r)throw new Error(`Missing function() body (argument ${i.length+2})`);if(e.lookAhead(0).getType()!=="SEMICOLON")throw new Error("Missing semicolon after function expression");return new mi(e.functions,n,i,r)}}class mi extends Q{constructor(e,t,r,n){super(),this.functionBody=n,this.type="CustomFunctionExpression",e.set(t.toLowerCase(),[r,n instanceof Ee?n.allExpressions[0].toString():n.toString()])}get allExpressions(){return[this.functionBody]}setExpressionAt(e,t){this.functionBody=t}get isReturn(){return!1}isStatic(){return!0}eval(){return 0}}class It{constructor(e={},t={}){this.config=t,this.expressionCache={},this.totalCacheEntries=0,t.useOptimizer===void 0&&(this.config.useOptimizer=!0),t.useCache===void 0&&(this.config.useCache=!0),t.earlyReturnsSkipParsing===void 0&&(this.config.earlyReturnsSkipParsing=!0),t.earlyReturnsSkipTokenization===void 0&&(this.config.earlyReturnsSkipTokenization=!0),t.convertUndefined===void 0&&(this.config.convertUndefined=!1),this.parser=new Ur({...this.config,tokenizer:void 0}),this.updateExecutionEnv(e,t.assumeFlatEnvironment)}updateConfig(e){(e=Object.assign(this.config,e)).tokenizer&&this.parser.setTokenizer(e.tokenizer),this.parser.updateConfig({...this.config,tokenizer:void 0}),this.executionEnvironment.updateConfig(e)}updateExecutionEnv(e,t=!1){this.executionEnvironment=new Tt(e,{useRadians:this.config.useRadians,convertUndefined:this.config.convertUndefined,isFlat:t,variableHandler:this.config.variableHandler}),this.parser.setExecutionEnvironment(this.executionEnvironment)}clearCache(){this.expressionCache={},this.totalCacheEntries=0}execute(e){this.parser.setExecutionEnvironment(this.executionEnvironment);const t=this.parse(e).eval();return t===void 0?0:typeof t=="boolean"?Number(t):t}executeAndCatch(e){try{return this.execute(e)}catch{return 0}}parse(e){var r,n,i;if((r=this.config.useCache)==null||r){const u=this.expressionCache[e];if(u)return u}this.parser.init(e);let t=this.parser.parseExpression();return((n=this.config.useOptimizer)!=null?n:1)&&t.isStatic()&&(t=new Se(t.eval())),((i=this.config.useCache)==null||i)&&(this.totalCacheEntries>(this.config.maxCacheSize||256)&&this.clearCache(),this.expressionCache[e]=t,this.totalCacheEntries++),t}resolveStatic(e){return e=(e=e.walk(t=>{if(!(t instanceof it))return t.isStatic()?new Se(t.eval()):void 0})).walk(t=>{if(t instanceof te)switch(t.operator){case"+":case"-":{const r=t.allExpressions.find(n=>n.isStatic()&&n.eval()===0);if(r)return t.allExpressions.find(n=>n!==r);break}case"*":if(t.allExpressions.find(r=>r.isStatic()&&r.eval()===0))return new Se(0);case"*":case"/":{const r=t.allExpressions.find(n=>n.isStatic()&&n.eval()===1);if(r)return t.allExpressions.find(n=>n!==r);break}}})}getParser(){return this.parser}}class Ci extends Ur{constructor(e){super(e),this.functions=new Map,this.classes=new Map,this.registerPrefix("FUNCTION",new Ei)}reset(){this.functions.clear()}}class Ai{constructor(e){this.parser=new Ci({useCache:!1,useOptimizer:!0,useAgressiveStaticOptimizer:!0,keepGroups:!0,earlyReturnsSkipParsing:!1,earlyReturnsSkipTokenization:!1}),this.parser.setExecutionEnvironment(new Tt(this.parser,e)),this.parser.setTokenizer(new _r(new Set(["function"])))}get functions(){return this.parser.functions}parse(e){return this.parser.init(e.replace(/\"/g,"'")),this.parser.parseExpression()}transform(e){const t=new It({},{useCache:!1,keepGroups:!0,useOptimizer:!0,useAgressiveStaticOptimizer:!0,earlyReturnsSkipParsing:!0,earlyReturnsSkipTokenization:!1});let r=0,n=t.parse(e),i=!1;n instanceof ue&&(i=!0);let u=!1;n=n.walk(a=>{var w;if(a.type!=="FunctionExpression")return;const c=a.name.name.replace(/(f|function)\./g,""),f=a.args;let[l,h]=(w=this.functions.get(c))!=null?w:[];if(!h||!l)return;h=h.replace(/(a|arg)\.(\w+)/g,(p,E,A)=>{var v,B;return((B=(v=f[l.indexOf(A)])==null?void 0:v.toString())!=null?B:"0").replace(/(t|temp)\./,"outer_temp.")});let C=function(p){if(p instanceof be)return new Ee(p.allExpressions[0],"()");if(!(p instanceof ue)||p.allExpressions.length>1)return p;const E=p.allExpressions[0];return E instanceof be?new Ee(E.allExpressions[0],"()"):p}(t.parse(h));if(C instanceof ue){const p=C.allExpressions.some(A=>A instanceof be),E=p||C.some(A=>A instanceof be);C=t.parse(`({${h}}+${E?p?"t.return_value":"(t.return_value??0)":"0"})`),u=!0}const y=new Map;return C=C.walk(p=>{if(p instanceof ze){let E=p.toString().split(".");const A=E.shift(),[v,...B]=E,k=B.length>0?"."+B.join("."):"";if(A==="t"||A==="temp"){let S=y.get(v);S||(S="t.__scvar"+r++,y.set(v,S)),p.setName(`${S}${k}`)}else A==="outer_temp"&&p.setName(`t.${v}${k}`)}else{if(p instanceof be){const E=new ze(t.getParser().executionEnv,"t.return_value"),A=p.allExpressions[0];return new te(E,A,"=",()=>{E.setPointer(A.eval())})}if(p instanceof ue){const E=[];for(let A=0;A<p.allExpressions.length;A++){const v=p.allExpressions[A];if(v instanceof Nt&&v.hasReturn){Fi(v,p.allExpressions.slice(A+1)),E.push(v);break}if(v.isReturn){E.push(v);break}E.push(v)}return new ue(E)}}}),C});const o=t.parse(n.toString());return t.resolveStatic(o),!i&&u?`return ${o.toString()};`:o.toString()}reset(){this.functions.clear()}}function Fi(s,e){if(s.isReturn)return;const t=s.allExpressions[2].isReturn?1:2,r=s.allExpressions[t];r instanceof Ne||(r instanceof Ee&&r.allExpressions[0]instanceof ue?e.unshift(...r.allExpressions):e.unshift(r)),e.length>0&&s.setExpressionAt(t,new Ee(new ue(e),"{}"))}var Gr=Object.freeze({__proto__:null,ArrayAccessExpression:Nr,BooleanExpression:Mr,BreakExpression:Hr,ContinueExpression:Lr,ForEachExpression:Pr,FunctionExpression:Or,GenericOperatorExpression:te,GroupExpression:Ee,LoopExpression:Ir,NameExpression:ze,NumberExpression:Ot,PostfixExpression:class extends Q{constructor(s,e){super(),this.expression=s,this.tokenType=e,this.type="PostfixExpression"}get allExpressions(){return[this.expression]}setExpressionAt(s,e){this.expression=e}isStatic(){return this.expression.isStatic()}eval(){this.tokenType}},PrefixExpression:$r,ReturnExpression:be,StatementExpression:ue,StaticExpression:Se,StringExpression:it,TernaryExpression:Nt,VoidExpression:Ne});const wi=({fileType:s,projectConfig:e,requestJsonData:t,options:r,console:n,jsRuntime:i})=>{const u=(h,C)=>e.resolvePackPath(h,C),o=new Ai({}),a=h=>h==null?void 0:h.endsWith(".molang"),c=h=>h==null?void 0:h.startsWith(e.resolvePackPath("behaviorPack","scripts/molang/")),f=h=>{var C;return(C=Object.entries(r.include).find(([y])=>(s==null?void 0:s.getId(h))===y))==null?void 0:C[1]};let l=[];return{async buildStart(){r.include=Object.assign(await t("data/packages/minecraftBedrock/location/validMoLang.json"),r.include)},transformPath(h){if(a(h)||c(h))return null},async read(h,C){if((a(h)||c(h))&&C){const y=await C.getFile();return await(y==null?void 0:y.text())}else if(f(h)&&h.endsWith(".json")&&C){const y=await C.getFile();if(!y)return;try{return Me.parse(await y.text())}catch(w){return r.buildType!=="fileRequest"&&n.error(`Error within file "${h}": ${w}`),{__error__:`Failed to load original file: ${w}`}}}},async load(h,C){if(a(h)&&C)o.parse(C);else if(c(h)){const y=await i.run(h,{console:n},C).catch(w=>(n.error(`Failed to execute Molang AST script "${h}": ${w}`),null));if(!y)return null;typeof y.__default__=="function"&&l.push(y.__default__)}},async require(h){if(f(h))return[u("behaviorPack","scripts/molang/**/*.[jt]s"),u("behaviorPack","molang/**/*.molang"),u("resourcePack","molang/**/*.molang")]},async transform(h,C){const y=f(h);y&&y.length>0&&y.forEach(w=>vr(w,C,p=>{if(typeof p!="string"||p[0]==="/"||p[0]==="@")return p;if(l.length>0){let E=null;try{E=o.parse(p)}catch(A){r.buildType!=="fileRequest"&&n.error(`Error within file "${h}"; script "${p}": ${A}`)}if(E){for(const A of l)E=E.walk(A);p=E.toString()}}try{return o.transform(p)}catch(E){return r.buildType!=="fileRequest"&&n.error(`Error within file "${h}"; script "${p}": ${E}`),p}}))},finalizeBuild(h,C){if(f(h)&&typeof C!="string")return JSON.stringify(C,null,"	")},buildEnd(){l=[]}}},yi=({fileType:s})=>({registerAliases(e,t){var r,n,i,u;if((s==null?void 0:s.getId(e))==="entity"&&((n=(r=t==null?void 0:t["minecraft:entity"])==null?void 0:r.description)==null?void 0:n.identifier))return[(u=(i=t==null?void 0:t["minecraft:entity"])==null?void 0:i.description)==null?void 0:u.identifier]}});function vi(s,e){const t=qr(s),r=qr(e),n=t.pop(),i=r.pop(),u=Jr(t,r);return u!==0?u:n&&i?Jr(n.split("."),i.split(".")):n||i?n?-1:1:0}const xi=(s,e,t)=>{Bi(t);const r=vi(s,e);return Vr[t].includes(r)},bi=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,qr=s=>{if(typeof s!="string")throw new TypeError("Invalid argument expected string");const e=s.match(bi);if(!e)throw new Error(`Invalid argument not valid semver ('${s}' received)`);return e.shift(),e},zr=s=>s==="*"||s==="x"||s==="X",Wr=s=>{const e=parseInt(s,10);return isNaN(e)?s:e},Si=(s,e)=>typeof s!=typeof e?[String(s),String(e)]:[s,e],_i=(s,e)=>{if(zr(s)||zr(e))return 0;const[t,r]=Si(Wr(s),Wr(e));return t>r?1:t<r?-1:0},Jr=(s,e)=>{for(let t=0;t<Math.max(s.length,e.length);t++){const r=_i(s[t]||0,e[t]||0);if(r!==0)return r}return 0},Vr={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]},Kr=Object.keys(Vr),Bi=s=>{if(typeof s!="string")throw new TypeError(`Invalid operator type, expected string but got ${typeof s}`);if(Kr.indexOf(s)===-1)throw new Error(`Invalid operator, expected one of ${Kr.join("|")}`)},Ri=(s,e)=>({register:t=>{var r;((r=t.type)!=null?r:"entity")===e&&(s.component=({name:n,schema:i,template:u})=>{const o=new t;n(t.component_name),i(Pt(Object.values(o.onPropose())[0])),u((a,{create:c})=>{c(o.onApply(a,"components")[`minecraft:${e}`])})})}});function Pt(s){const e={},t=Object.keys(s);if(t.length===1&&t[0].startsWith("$dynamic.list."))return{type:"array",items:Pt(Object.values(s)[0])};for(const[r,n]of Object.entries(s))r.startsWith("$")||(typeof n=="string"?e[r]=ki(n):Array.isArray(n)?e[r]={enum:n}:n==="object"&&(e[r]=Pt(n)));return{type:"object",properties:e}}function ki(s){switch(s){case"$general.boolean":return{type:"boolean"};case"$general.number":return{type:"integer"};case"$general.decimal":return{type:"number"};default:return{type:["number","integer","string","boolean","object","array"]}}}class Qr{constructor(e,t,r,n,i,u){this.console=e,this.fileType=t,this.componentSrc=r,this.mode=n,this.v1Compat=i,this.targetVersion=u,this.animations=[],this.animationControllers=[],this.createOnPlayer=[],this.dialogueScenes={},this.serverFiles=[],this.clientFiles={},this.lifecycleHookCount={activated:0,deactivated:0}}setProjectConfig(e){this.projectConfig=e}get name(){return this._name}async load(e,t,r){let n={component:null};const i=await e.run(t,{defineComponent:c=>c,console:this.console,Bridge:this.v1Compat?Ri(n,this.fileType):void 0}).catch(()=>(this.console.error(`Failed to execute component ${t}`),null));if(!i)return!1;if(typeof i.__default__!="function")if(n.component)i.__default__=n.component;else return this.console.error(`Component ${t} is not a valid component. Expected a function as the default export.`),!1;const u=c=>this._name=c;let o=c=>this.schema=c,a=()=>{};return(!r||r==="server")&&(o=()=>{},a=c=>{this.template=(f,l)=>{try{c(f,l)}catch(h){this.console.log(c.toString()),this.console.error(h)}}}),await i.__default__({name:u,schema:o,template:a}),!0}reset(){this.animations=[],this.animationControllers=[],this.clientFiles={},this.serverFiles=[]}getSchema(){return this.schema}toString(){return this.componentSrc}create(e,t,r=`minecraft:${this.fileType}`,n){var a;const i=r.split("/"),u=i.pop(),o=this.getObjAtLocation(e,[...i]);o[u]=(n?(c,f)=>n(Ue,c,f):Ue)((a=o[u])!=null?a:{},t!=null?t:{})}getObjAtLocation(e,t){let r=e;for(;t.length>0;){const n=t.shift();r[n]===void 0?r[Number(n)]!==void 0?r=r[Number(n)]:(r[n]={},r=r[n]):r=r[n]}return r}async processTemplates(e,t,r){var p,E,A,v,B,k;if(typeof this.template!="function")return;const n=(A=(E=(p=e[`minecraft:${this.fileType}`])==null?void 0:p.description)==null?void 0:E.identifier)!=null?A:"bridge:no_identifier",i=await $t(`${this.name}/${n}`),u=(k=(B=(v=this.projectConfig)==null?void 0:v.get())==null?void 0:B.namespace)!=null?k:"bridge",o=(S,$)=>(this.animations.push([S,$]),this.getShortAnimName("a",i,this.animations.length-1)),a=(S,$)=>(this.animationControllers.push([S,$]),this.getShortAnimName("ac",i,this.animationControllers.length-1)),c=S=>{const $=`loot_tables/bridge/${this.getShortAnimName("lt",i,this.serverFiles.length)}.json`;return this.serverFiles.push([$,S]),$},f=S=>{const $=`trading/bridge/${this.getShortAnimName("tt",i,this.serverFiles.length)}.json`;return this.serverFiles.push([$,S]),$},l=S=>{this.serverFiles.push([`recipes/bridge/${this.getShortAnimName("recipe",i,this.serverFiles.length)}.json`,S])},h=S=>{this.serverFiles.push([`spawn_rules/bridge/${this.getShortAnimName("sr",i,this.serverFiles.length)}.json`,S])},C=(await $t(`${this.name}/${r}`)).slice(0,16),y=S=>this.registerLifecycleHook(e,r,S,C,"activated"),w=S=>this.registerLifecycleHook(e,r,S,C,"deactivated");this.fileType==="entity"?this.template(t!=null?t:{},{mode:this.mode,compilerMode:this.mode,sourceEntity:()=>JSON.parse(JSON.stringify(e)),create:(S,$,R)=>this.create(e,S,$,R),location:r,identifier:n,projectNamespace:u,animationController:a,animation:o,lootTable:c,tradeTable:f,spawnRule:h,dialogueScene:!this.targetVersion||xi(this.targetVersion,"1.17.10",">=")?(S,$=!0)=>{this.dialogueScenes[i]||(this.dialogueScenes[i]=[]),this.dialogueScenes[i].push(S),S.scene_tag&&$&&y({run_command:{command:[`/dialogue open @s @p ${S.scene_tag}`]}})}:void 0,onActivated:y,onDeactivated:w,client:{create:(S,$="1.10.0")=>{this.clientFiles[`entity/bridge/${i}.json`]={format_version:$,"minecraft:client_entity":Object.assign({description:{identifier:n}},S)}}}}):this.fileType==="item"?this.template(t!=null?t:{},{mode:this.mode,compilerMode:this.mode,sourceItem:()=>JSON.parse(JSON.stringify(e)),create:(S,$,R)=>this.create(e,S,$,R),location:r,identifier:n,projectNamespace:u,lootTable:c,recipe:l,player:{animationController:a,animation:o,create:(S,$,R)=>this.createOnPlayer.push([$!=null?$:"minecraft:entity",S,R])}}):this.fileType==="block"&&this.template(t!=null?t:{},{mode:this.mode,compilerMode:this.mode,sourceBlock:()=>JSON.parse(JSON.stringify(e)),create:(S,$,R)=>this.create(e,S,$,R),lootTable:c,recipe:l,location:r,identifier:n,projectNamespace:u})}async processAdditionalFiles(e,t){var c,f,l,h,C,y;const r=(f=(c=this.projectConfig)==null?void 0:c.getRelativePackRoot("behaviorPack"))!=null?f:"BP",n=(l=this.projectConfig)==null?void 0:l.getRelativePackRoot("resourcePack"),i=(y=(C=(h=t[`minecraft:${this.fileType}`])==null?void 0:h.description)==null?void 0:C.identifier)!=null?y:"bridge:no_identifier",u=await $t(`${this.name}/${i}`),o=`${r}/animations/bridge/${u}.json`,a=`${r}/animation_controllers/bridge/${u}.json`;return i==="minecraft:player"&&this.createOnPlayer.forEach(([w,p,E])=>{this.create(t,p,w,E)}),n||(this.clientFiles={},this.console.error(`[${this.name}] Dash was unable to load the root of your resource pack and therefore cannot generate client files for this component.`)),{[o]:{baseFile:e,fileContent:this.createAnimations(u,t)},[a]:{baseFile:e,fileContent:this.createAnimationControllers(u,t)},[j.join(r,`dialogue/bridge/${u}.json`)]:this.dialogueScenes[u]&&this.dialogueScenes[u].length>0?{baseFile:e,fileContent:JSON.stringify({format_version:this.targetVersion,"minecraft:npc_dialogue":{scenes:this.dialogueScenes[u]}},null,"	")}:void 0,...Object.fromEntries(this.serverFiles.map(([w,p])=>[j.join(r,w),{baseFile:e,fileContent:JSON.stringify(p,null,"	")}])),...Object.fromEntries(Object.entries(this.clientFiles).map(([w,p])=>[j.join(n,w),{baseFile:e,fileContent:JSON.stringify(p,null,"	")}]))}}createAnimations(e,t){if(this.animations.length===0)return;let r=0;const n={format_version:"1.10.0",animations:{}};for(const[i,u]of this.animations){if(!i){r++;continue}const o=this.getAnimName("animation",e,r),a=this.getShortAnimName("a",e,r);n.animations[o]=i,this.create(t,{animations:{[a]:o}},"minecraft:entity/description"),u!==!1&&this.create(t,{scripts:{animate:[u?{[a]:u}:a]}},"minecraft:entity/description"),r++}return JSON.stringify(n,null,"	")}createAnimationControllers(e,t){if(this.animationControllers.length===0)return;let r=0;const n={format_version:"1.10.0",animation_controllers:{}};for(const[i,u]of this.animationControllers){if(!i){r++;continue}const o=this.getAnimName("controller.animation",e,r),a=this.getShortAnimName("ac",e,r);n.animation_controllers[o]=i,this.create(t,{animations:{[a]:o}},"minecraft:entity/description"),u!==!1&&this.create(t,{scripts:{animate:[u?{[a]:u}:a]}},"minecraft:entity/description"),r++}return JSON.stringify(n,null,"	")}getAnimName(e,t,r){return`${e}.${t}_${r}`}getShortAnimName(e,t,r){var n;return`${(n=t.slice(0,16))!=null?n:"bridge_auto"}_${e}_${r}`}registerLifecycleHook(e,t,r,n,i){e[`minecraft:${this.fileType}`].events||(e[`minecraft:${this.fileType}`].events={});const u=e[`minecraft:${this.fileType}`].events;if(i==="activated"&&t===`minecraft:${this.fileType}/components`)u["minecraft:entity_spawned"]||(u["minecraft:entity_spawned"]={}),this.addEventReponse(u["minecraft:entity_spawned"],r);else if(this.fileType==="entity"&&t.startsWith(`minecraft:${this.fileType}/component_groups/`)){const o=t.split("/").pop();this.findComponentGroupReferences(u,i==="activated"?"add":"remove",o).forEach(c=>this.addEventReponse(c,r))}else if(t.startsWith(`minecraft:${this.fileType}/permutations/`)){const o=t.split("/");if(o.pop()!=="components")throw new Error("Invalid component location inside of permutation");const a=this.getObjAtLocation(e,[...o]),c=`bridge:${n}_${i}_${i==="activated"?this.lifecycleHookCount.activated++:this.lifecycleHookCount.deactivated++}`;a.condition&&this.animationControllers.push([{states:{default:{on_entry:[`@s ${c}`]}}},i==="activated"?a.condition:`!(${a.condition})`]),u[c]=r}}addEventReponse(e,t){if(Array.isArray(e.sequence))e.sequence.push(t);else if(Object.keys(e).length===0)Object.assign(e,t);else{let r=Object.assign({},e,{filters:void 0});for(const n in e)n!=="filters"&&(e[n]=void 0);e.sequence=[r,t]}}findComponentGroupReferences(e,t,r){var i,u;let n=[];for(const o in e){const a=e[o];Array.isArray(a.sequence)?n.push(...this.findComponentGroupReferences(a.sequence,t,r)):Array.isArray(a.randomize)?n.push(...this.findComponentGroupReferences(a.randomize,t,r)):((u=(i=a[t])==null?void 0:i.component_groups)!=null?u:[]).includes(r)&&n.push(a)}return n}}function $i(s){const e=[];for(const[t,r]of s)e.push(...Ti(r,t));return e}function Ti(s,e){const t=[];for(const r in s)r.startsWith("minecraft:")||r.startsWith("tag:")||t.push([r,e]);return t}function Lt({fileType:s,getComponentObjects:e}){const t=new Map;let r={};return({console:n,projectConfig:i,projectRoot:u,compileFiles:o,getAliases:a,options:c,jsRuntime:f,targetVersion:l,fileType:h})=>{const C=(p,E)=>p&&s==="item"&&(h==null?void 0:h.getId(p))==="entity"&&E(p).includes("minecraft:player"),y=p=>c.v1CompatMode?p==null?void 0:p.includes("/components/"):p&&(h==null?void 0:h.getId(p))==="customComponent"&&p.includes(`/${s}/`),w=p=>p&&(h==null?void 0:h.getId(p))===s;return{buildStart(){t.clear(),r={}},transformPath(p){if(y(p)&&c.buildType!=="fileRequest")return null},async read(p,E){if(!E)return r[p]?Me.parse(r[p].fileContent):void 0;if(y(p)&&p.endsWith(".js")){const A=await E.getFile();return await(A==null?void 0:A.text())}else if(w(p)||C(p,a)){const A=await E.getFile();if(!A)return;try{return Me.parse(await A.text())}catch(v){return c.buildType!=="fileRequest"&&n.error(`Error within file "${p}": ${v}`),{__error__:`Failed to load original file: ${v}`}}}},async load(p,E){if(y(p)&&typeof E=="string"){const A=new Qr(n,s,E,c.mode,!!c.v1CompatMode,l);return A.setProjectConfig(i),await A.load(f,p)?A:E}},async registerAliases(p,E){if(y(p))return[`${s}Component#${E.name}`]},async require(p,E){if(C(p,a))return[`.${i.getRelativePackRoot("behaviorPack")}/components/item/**/*.[jt]s`,`.${i.getRelativePackRoot("behaviorPack")}/items/**/*.json`];if(w(p)){const A=$i(e(E));return t.set(p,A),A.map(v=>`${s}Component#${v[0]}`)}else if(r[p])return[r[p].baseFile]},async transform(p,E,A={}){var v;if(C(p,a)){const B=Object.entries(A).filter(([k])=>k.startsWith("itemComponent#")).map(([k,S])=>S);for(const k of B){if(!k)return;r=Ue(r,await k.processAdditionalFiles(p,E))}}else if(w(p)){const B=new Set;for(const[k,S]of(v=t.get(p))!=null?v:[]){const $=A[`${s}Component#${k}`];if(!$)continue;const R=yn(E,S.split("/"),{}),F=R[k];delete R[k],await $.processTemplates(E,F,S),B.add($)}for(const k of B)r=Ue(r,await k.processAdditionalFiles(p,E));for(const k of B)k.reset()}},finalizeBuild(p,E){if(y(p)&&E)return E.toString();if(w(p)||r[p])return JSON.stringify(E,null,"	")},async buildEnd(){if(c.buildType==="fileRequest")return;r=Object.fromEntries(Object.entries(r).filter(([E,A])=>(A==null?void 0:A.fileContent)!==void 0).map(([E,A])=>[j.join(u,E),A]));const p=Object.keys(r);p.length>0&&await o(p),r={}}}}}const Oi=Lt({fileType:"entity",getComponentObjects:s=>{var e,t,r,n,i,u;return[["minecraft:entity/components",(t=(e=s==null?void 0:s["minecraft:entity"])==null?void 0:e.components)!=null?t:{}],...Object.entries((n=(r=s==null?void 0:s["minecraft:entity"])==null?void 0:r.component_groups)!=null?n:{}).map(([o,a])=>[`minecraft:entity/component_groups/${o}`,a]),...((u=(i=s==null?void 0:s["minecraft:entity"])==null?void 0:i.permutations)!=null?u:[]).map((o,a)=>{var c;return[`minecraft:entity/permutations/${a}/components`,(c=o==null?void 0:o.components)!=null?c:{}]})]}}),Ni=Lt({fileType:"item",getComponentObjects:s=>{var e,t;return[["minecraft:item/components",(t=(e=s==null?void 0:s["minecraft:item"])==null?void 0:e.components)!=null?t:{}]]}}),Ii=Lt({fileType:"block",getComponentObjects:s=>{var e,t,r,n;return[["minecraft:block/components",(t=(e=s==null?void 0:s["minecraft:block"])==null?void 0:e.components)!=null?t:{}],...((n=(r=s==null?void 0:s["minecraft:block"])==null?void 0:r.permutations)!=null?n:[]).map((i,u)=>{var o;return[`minecraft:block/permutations/${u}/components`,(o=i.components)!=null?o:{}]})]}});function Ht(s,e,t,r=0){const n=[];for(const i of s){if(!i.startsWith("/")){n.push(i);continue}const[u,...o]=xr(i.slice(1)).tokens.map(({word:c})=>c),a=e[`command#${u}`];if(u==="execute"){let c=4;if(o[c]==="detect"&&(c+=6),o[c]===void 0){n.push(i);continue}const[f,...l]=o.slice(c),h=e[`command#${f}`];if(!(h instanceof ut)){n.push(i);continue}n.push(...h.process(`${f} ${l.join(" ")}`,e,r+1).map(C=>C.startsWith("/")?`/execute ${o.slice(0,c).join(" ")} ${C.slice(1)}`:C));continue}else if(!(a instanceof ut)){n.push(i);continue}n.push(...a.process(i,e,r))}return n.filter(i=>t||!i.startsWith("#")).map(i=>i.trim())}const Pi=s=>({register:e=>{s.command=({name:t,schema:r,template:n})=>{t(e.command_name),r([]),n(i=>new e().onApply(i))}}});class ut{constructor(e,t,r,n){this.console=e,this.commandSrc=t,this.mode=r,this.v1Compat=n}get name(){var e;return(e=this._name)!=null?e:"unknown"}async load(e,t,r){const n={command:null},i=await e.run(t,{console:this.console,defineCommand:c=>c,Bridge:this.v1Compat?Pi(n):void 0}).catch(c=>(this.console.error(`Failed to execute command ${this.name}: ${c}`),null));if(!i)return null;if(typeof i.__default__!="function")if(n.command)i.__default__=n.command;else return this.console.error(`Component ${t} is not a valid component. Expected a function as the default export.`),!1;const u=c=>this._name=c;let o=c=>this.schema=c,a=()=>{};(!r||r==="server")&&(o=()=>{},a=c=>{this.template=(f,l)=>{try{return c(f,l)}catch(h){return this.console.error(h),[]}}}),await i.__default__({name:u,schema:o,template:a})}process(e,t,r){var a;e.startsWith("/")&&(e=e.slice(1));const[n,...i]=xr(e).tokens.map(({word:c})=>c),u=(a=this.template)==null?void 0:a.call(this,i.map(c=>Sn(c)),{compilerMode:this.mode,commandNestingDepth:r,compileCommands:c=>Ht(c.map(f=>f.startsWith("/")?f:`/${f}`),t,!1,r+1).map(f=>f.startsWith("/")?f.slice(1):f)});let o=[];if(typeof u=="string")o=u.split(`
`);else if(Array.isArray(u))o=u.filter(c=>typeof c=="string");else{const c=`Failed to process command ${this._name}; Invalid command template return type: Expected string[] or string, received ${typeof u}`;this.console.error(c),o.push(`# ${c}`)}return o.map(c=>c.startsWith("/")||c.startsWith("#")?c:`/${c}`)}getSchema(){if(this.schema){if(Array.isArray(this.schema))return this.schema.length===0?[{commandName:this.name}]:this.schema.map(e=>({commandName:this.name,...e}))}else return[{commandName:this.name}];return this.schema.commandName||(this.schema.commandName=this.name),[this.schema]}toString(){return this.commandSrc}}const Li=({projectConfig:s,jsRuntime:e,console:t,fileType:r,requestJsonData:n,options:i})=>{const u=(l,h)=>s.resolvePackPath(l,h),o=l=>l&&r.getId(l)==="customCommand",a=l=>l&&r.getId(l)==="function",c=l=>{var h;return(h=Object.entries(i.include).find(([C])=>r.getId(l)===C))==null?void 0:h[1]},f=l=>{var h,C,y;return(y=(C=(h=r.get(l))==null?void 0:h.meta)==null?void 0:C.commandsUseSlash)!=null?y:!1};return{async buildStart(){i.include=Object.assign(await n("data/packages/minecraftBedrock/location/validCommand.json"),i.include)},transformPath(l){if(o(l)&&i.buildType!=="fileRequest")return null},async read(l,h){if(!!h){if(o(l)&&l.endsWith(".js")){const C=await h.getFile();return await(C==null?void 0:C.text())}else if(a(l)){const C=await h.getFile();return await(C==null?void 0:C.text())}else if(c(l)&&h){const C=await h.getFile();if(!C)return;try{return Me.parse(await C.text())}catch(y){t.error(y)}}}},async load(l,h){var C;if(o(l)){const y=new ut(t,h,i.mode,(C=i.v1CompatMode)!=null?C:!1);return await y.load(e,l),y}},async registerAliases(l,h){if(o(l))return[`command#${h.name}`]},async require(l){if(c(l)||a(l))return[u("behaviorPack","commands/**/*.[jt]s"),u("behaviorPack","commands/*.[jt]s")]},async transform(l,h,C={}){const y=c(l);if(y&&y.length>0){const w=f(l);y.forEach(p=>vr(p,h,E=>{if(!E)return E;E=Array.isArray(E)?E:[E];const A=[];for(const v of E){if(typeof v=="string"){A.push(v);continue}t.error(`The file "${l}" contains invalid commands. Expected type "string" within array but got type "${typeof v}"`)}return Ht(A.map(v=>!w&&!v.startsWith("/")?`/${v}`:v),C,!1).map(v=>w?v:v.slice(1))}))}else if(a(l)){const w=h.split(`
`).map(p=>p.trim()).filter(p=>p!==""&&!p.startsWith("#")).map(p=>`/${p}`);return Ht(w,C,!0).map(p=>p.startsWith("/")?p.slice(1):p).join(`
`)}},finalizeBuild(l,h){if(o(l)&&h)return h.toString();if(c(l)&&typeof h!="string")return JSON.stringify(h,null,"	")}}};var We={exports:{}},Hi={},Mi=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Hi}),Mt=Pe(Mi);(function(s){let e={};e.__wbindgen_placeholder__=s.exports;let t;const{TextDecoder:r,TextEncoder:n}=Mt;let i=new r("utf-8",{ignoreBOM:!0,fatal:!0});i.decode();let u=null;function o(){return(u===null||u.buffer!==t.memory.buffer)&&(u=new Uint8Array(t.memory.buffer)),u}function a(F,_){return i.decode(o().subarray(F,F+_))}const c=new Array(32).fill(void 0);c.push(void 0,null,!0,!1);let f=c.length;function l(F){f===c.length&&c.push(c.length+1);const _=f;return f=c[_],c[_]=F,_}function h(F){return c[F]}let C=0,y=new n("utf-8");const w=typeof y.encodeInto=="function"?function(F,_){return y.encodeInto(F,_)}:function(F,_){const g=y.encode(F);return _.set(g),{read:F.length,written:g.length}};function p(F,_,g){if(g===void 0){const d=y.encode(F),z=_(d.length);return o().subarray(z,z+d.length).set(d),C=d.length,z}let N=F.length,T=_(N);const J=o();let D=0;for(;D<N;D++){const d=F.charCodeAt(D);if(d>127)break;J[T+D]=d}if(D!==N){D!==0&&(F=F.slice(D)),T=g(T,N,N=D+F.length*3);const d=o().subarray(T+D,T+N);D+=w(F,d).written}return C=D,T}let E=null;function A(){return(E===null||E.buffer!==t.memory.buffer)&&(E=new Int32Array(t.memory.buffer)),E}function v(F){F<36||(c[F]=f,f=F)}function B(F){const _=h(F);return v(F),_}s.exports.minifySync=function(F,_){try{const d=t.__wbindgen_add_to_stack_pointer(-16);var g=p(F,t.__wbindgen_malloc,t.__wbindgen_realloc),N=C;t.minifySync(d,g,N,l(_));var T=A()[d/4+0],J=A()[d/4+1],D=A()[d/4+2];if(D)throw B(J);return B(T)}finally{t.__wbindgen_add_to_stack_pointer(16)}},s.exports.parseSync=function(F,_){try{const d=t.__wbindgen_add_to_stack_pointer(-16);var g=p(F,t.__wbindgen_malloc,t.__wbindgen_realloc),N=C;t.parseSync(d,g,N,l(_));var T=A()[d/4+0],J=A()[d/4+1],D=A()[d/4+2];if(D)throw B(J);return B(T)}finally{t.__wbindgen_add_to_stack_pointer(16)}},s.exports.printSync=function(F,_){try{const J=t.__wbindgen_add_to_stack_pointer(-16);t.printSync(J,l(F),l(_));var g=A()[J/4+0],N=A()[J/4+1],T=A()[J/4+2];if(T)throw B(N);return B(g)}finally{t.__wbindgen_add_to_stack_pointer(16)}},s.exports.transformSync=function(F,_,g){try{const z=t.__wbindgen_add_to_stack_pointer(-16);var N=p(F,t.__wbindgen_malloc,t.__wbindgen_realloc),T=C;t.transformSync(z,N,T,l(_),l(g));var J=A()[z/4+0],D=A()[z/4+1],d=A()[z/4+2];if(d)throw B(D);return B(J)}finally{t.__wbindgen_add_to_stack_pointer(16)}},s.exports.__wbindgen_json_parse=function(F,_){var g=JSON.parse(a(F,_));return l(g)},s.exports.__wbindgen_json_serialize=function(F,_){const g=h(_);var N=JSON.stringify(g===void 0?null:g),T=p(N,t.__wbindgen_malloc,t.__wbindgen_realloc),J=C;A()[F/4+1]=J,A()[F/4+0]=T},s.exports.__wbindgen_object_drop_ref=function(F){B(F)},s.exports.__wbindgen_string_new=function(F,_){var g=a(F,_);return l(g)},s.exports.__wbg_new0_57a6a2c2aaed3fc5=function(){var F=new Date;return l(F)},s.exports.__wbg_getTime_f8ce0ff902444efb=function(F){var _=h(F).getTime();return _},s.exports.__wbg_getTimezoneOffset_41211a984662508b=function(F){var _=h(F).getTimezoneOffset();return _},s.exports.__wbg_new_693216e109162396=function(){var F=new Error;return l(F)},s.exports.__wbg_stack_0ddaca5d1abfb52f=function(F,_){var g=h(_).stack,N=p(g,t.__wbindgen_malloc,t.__wbindgen_realloc),T=C;A()[F/4+1]=T,A()[F/4+0]=N},s.exports.__wbg_error_09919627ac0992f5=function(F,_){try{console.error(a(F,_))}finally{t.__wbindgen_free(F,_)}},s.exports.__wbindgen_throw=function(F,_){throw new Error(a(F,_))};const k=Mt.join(__dirname,"wasm_bg.wasm"),S=Mt.readFileSync(k),$=new WebAssembly.Module(S);t=new WebAssembly.Instance($,e).exports,s.exports.__wasm=t})(We);var ji=We.exports;const Ui=({options:s})=>({async transformPath(e){if(!!(e!=null&&e.endsWith(".ts")))return`${e.slice(0,-3)}.js`},async read(e,t){if(!e.endsWith(".ts")||!t)return;const r=await t.getFile();return await(r==null?void 0:r.text())},load(e,t){if(!!e.endsWith(".ts"))return We.exports.transformSync(t,{filename:j.basename(e),sourceMaps:s!=null&&s.inlineSourceMap?"inline":void 0,jsc:{parser:{syntax:"typescript"},target:"es2020"}}).code},finalizeBuild(e,t){if(e.endsWith(".ts")&&typeof t=="string")return t}}),Gi=({options:s,outputFileSystem:e,projectRoot:t,packType:r,fileType:n,console:i})=>{s.packName||(s.packName="bridge project");const u=f=>f.split(/\\|\//g).filter(l=>l!==".."&&l!==".").slice(1).join("/"),o=f=>{const l=r.getId(f),h=j.relative(t,f);if(l==="behaviorPack"||l==="resourcePack"||l==="skinPack")return j.join(t,"builds/dist",l,u(h))},a=f=>{const l=r.getId(f),h=j.relative(t,f);if(l==="worldTemplate")return j.join(t,"builds/dist",u(h));if(l==="behaviorPack"||l==="resourcePack")return j.join(t,"builds/dist",l==="behaviorPack"?"behavior_packs":"resource_packs",s.packName,u(h))},c=f=>n.getId(f)==="worldManifest"?null:a(f);return{async buildStart(){await e.unlink(`${t}/builds/dist`).catch(()=>{})},transformPath(f){if(!!f)switch(s.format){case"mcaddon":return o(f);case"mcworld":return c(f);case"mctemplate":return a(f);default:i.error(`Unknown packaging format: ${s.format}`)}}}},qi=({projectConfig:s,packType:e,options:t})=>{const r=Object.keys(s.getAvailablePacks()),n=Object.fromEntries(r.map(u=>[u,[]])),i=u=>{const o=e.getId(u);if(o!=="unknown")return[o,s.resolvePackPath(o,"contents.json")]};return t.buildType!=="fullBuild"?{}:{include(){return r.map(u=>[s.resolvePackPath(u,"contents.json"),{isVirtual:!0}])},read(u){const o=i(u);if(!o)return;const[a,c]=o;if(u!==c)return n[a]},transformPath(u){if(!u)return;const o=e.getId(u);o!=="unknown"&&n[o].push(u)},finalizeBuild(u){const o=i(u);if(!o)return;const[a,c]=o;if(u!==c)return JSON.stringify(n[a])}}},zi=({fileType:s})=>{const e=[];for(const r of s.all)r.formatVersionMap&&e.push(r.id);const t=r=>r&&e.includes(s.getId(r));return{async read(r,n){if(!!n&&t(r)){const i=await n.getFile();if(!i)return;try{return Me.parse(await i.text())}catch(u){console.error(u)}}},load(r,n){if(t(r))return n},transform(r,n){if(t(r)){const i=s.get(r),u=i==null?void 0:i.formatVersionMap;if(!u)return;const o=n==null?void 0:n.format_version;return o&&u[o]&&(n.format_version=u[o]),n}},finalizeBuild(r,n){if(t(r))return JSON.stringify(n)}}},Wi=({fileType:s,console:e,jsRuntime:t})=>{const r=o=>s.getId(o),n=o=>{var c;const a=s.get(o);return a?(c=a.type)!=null?c:"json":"raw"},i=o=>r(o)!=="gameTest"&&(o.endsWith(".js")||o.endsWith(".ts")),u=o=>{var c,f,l,h;return n(o)==="json"?".json":(h=(l=(f=(c=s.get(o))==null?void 0:c.detect)==null?void 0:f.fileExtensions)==null?void 0:l[0])!=null?h:".txt"};return{transformPath(o){if(o&&i(o))return o.replace(/\.(js|ts)$/,`.${u(o)}`)},read(o,a){if(i(o))return a==null?void 0:a.getFile()},async load(o,a){if(i(o)){const c=await t.run(o,{console:e},a).catch(f=>(e.error(`Failed to execute generator script "${o}": ${f}`),null));return c?c.__default__?c.__default__:(e.error(`Expected generator script "${o}" to provide file content as default export!`),null):null}},finalizeBuild(o,a){if(i(o))return a===null?null:typeof a=="object"?JSON.stringify(a):a}}};for(var Ji={},jt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ot=0;ot<jt.length;ot++)Ji[jt.charCodeAt(ot)]=ot;function Vi(s){for(var e=0,t=0,r=0,n=0,i="",u=0;u<s.length;u++){var o=s[u];if(u>0&&(i+=";"),o.length!==0){for(var a=0,c=[],f=0,l=o;f<l.length;f++){var h=l[f],C=Je(h[0]-a);a=h[0],h.length>1&&(C+=Je(h[1]-e)+Je(h[2]-t)+Je(h[3]-r),e=h[1],t=h[2],r=h[3]),h.length===5&&(C+=Je(h[4]-n),n=h[4]),c.push(C)}i+=c.join(",")}}return i}function Je(s){var e="";s=s<0?-s<<1|1:s<<1;do{var t=s&31;s>>>=5,s>0&&(t|=32),e+=jt[t]}while(s>0);return e}class at{constructor(e){this.bits=e instanceof at?e.bits.slice():[]}add(e){this.bits[e>>5]|=1<<(e&31)}has(e){return!!(this.bits[e>>5]&1<<(e&31))}}class Ve{constructor(e,t,r){this.start=e,this.end=t,this.original=r,this.intro="",this.outro="",this.content=r,this.storeName=!1,this.edited=!1,Object.defineProperties(this,{previous:{writable:!0,value:null},next:{writable:!0,value:null}})}appendLeft(e){this.outro+=e}appendRight(e){this.intro=this.intro+e}clone(){const e=new Ve(this.start,this.end,this.original);return e.intro=this.intro,e.outro=this.outro,e.content=this.content,e.storeName=this.storeName,e.edited=this.edited,e}contains(e){return this.start<e&&e<this.end}eachNext(e){let t=this;for(;t;)e(t),t=t.next}eachPrevious(e){let t=this;for(;t;)e(t),t=t.previous}edit(e,t,r){return this.content=e,r||(this.intro="",this.outro=""),this.storeName=t,this.edited=!0,this}prependLeft(e){this.outro=e+this.outro}prependRight(e){this.intro=e+this.intro}split(e){const t=e-this.start,r=this.original.slice(0,t),n=this.original.slice(t);this.original=r;const i=new Ve(e,this.end,n);return i.outro=this.outro,this.outro="",this.end=e,this.edited?(i.edit("",!1),this.content=""):this.content=r,i.next=this.next,i.next&&(i.next.previous=i),i.previous=this,this.next=i,i}toString(){return this.intro+this.content+this.outro}trimEnd(e){if(this.outro=this.outro.replace(e,""),this.outro.length)return!0;const t=this.content.replace(e,"");if(t.length)return t!==this.content&&this.split(this.start+t.length).edit("",void 0,!0),!0;if(this.edit("",void 0,!0),this.intro=this.intro.replace(e,""),this.intro.length)return!0}trimStart(e){if(this.intro=this.intro.replace(e,""),this.intro.length)return!0;const t=this.content.replace(e,"");if(t.length)return t!==this.content&&(this.split(this.end-t.length),this.edit("",void 0,!0)),!0;if(this.edit("",void 0,!0),this.outro=this.outro.replace(e,""),this.outro.length)return!0}}let Ut=()=>{throw new Error("Unsupported environment: `window.btoa` or `Buffer` should be supported.")};typeof window!="undefined"&&typeof window.btoa=="function"?Ut=s=>window.btoa(unescape(encodeURIComponent(s))):typeof Buffer=="function"&&(Ut=s=>Buffer.from(s,"utf-8").toString("base64"));class Ki{constructor(e){this.version=3,this.file=e.file,this.sources=e.sources,this.sourcesContent=e.sourcesContent,this.names=e.names,this.mappings=Vi(e.mappings)}toString(){return JSON.stringify(this)}toUrl(){return"data:application/json;charset=utf-8;base64,"+Ut(this.toString())}}function Qi(s){const e=s.split(`
`),t=e.filter(i=>/^\t+/.test(i)),r=e.filter(i=>/^ {2,}/.test(i));if(t.length===0&&r.length===0)return null;if(t.length>=r.length)return"	";const n=r.reduce((i,u)=>{const o=/^ +/.exec(u)[0].length;return Math.min(o,i)},1/0);return new Array(n+1).join(" ")}function Xi(s,e){const t=s.split(/[/\\]/),r=e.split(/[/\\]/);for(t.pop();t[0]===r[0];)t.shift(),r.shift();if(t.length){let n=t.length;for(;n--;)t[n]=".."}return t.concat(r).join("/")}const Yi=Object.prototype.toString;function Zi(s){return Yi.call(s)==="[object Object]"}function Xr(s){const e=s.split(`
`),t=[];for(let r=0,n=0;r<e.length;r++)t.push(n),n+=e[r].length+1;return function(n){let i=0,u=t.length;for(;i<u;){const c=i+u>>1;n<t[c]?u=c:i=c+1}const o=i-1,a=n-t[o];return{line:o,column:a}}}class eu{constructor(e){this.hires=e,this.generatedCodeLine=0,this.generatedCodeColumn=0,this.raw=[],this.rawSegments=this.raw[this.generatedCodeLine]=[],this.pending=null}addEdit(e,t,r,n){if(t.length){const i=[this.generatedCodeColumn,e,r.line,r.column];n>=0&&i.push(n),this.rawSegments.push(i)}else this.pending&&this.rawSegments.push(this.pending);this.advance(t),this.pending=null}addUneditedChunk(e,t,r,n,i){let u=t.start,o=!0;for(;u<t.end;)(this.hires||o||i.has(u))&&this.rawSegments.push([this.generatedCodeColumn,e,n.line,n.column]),r[u]===`
`?(n.line+=1,n.column=0,this.generatedCodeLine+=1,this.raw[this.generatedCodeLine]=this.rawSegments=[],this.generatedCodeColumn=0,o=!0):(n.column+=1,this.generatedCodeColumn+=1,o=!1),u+=1;this.pending=null}advance(e){if(!e)return;const t=e.split(`
`);if(t.length>1){for(let r=0;r<t.length-1;r++)this.generatedCodeLine++,this.raw[this.generatedCodeLine]=this.rawSegments=[];this.generatedCodeColumn=0}this.generatedCodeColumn+=t[t.length-1].length}}const Ke=`
`,Ie={insertLeft:!1,insertRight:!1,storeName:!1};class Gt{constructor(e,t={}){const r=new Ve(0,e.length,e);Object.defineProperties(this,{original:{writable:!0,value:e},outro:{writable:!0,value:""},intro:{writable:!0,value:""},firstChunk:{writable:!0,value:r},lastChunk:{writable:!0,value:r},lastSearchedChunk:{writable:!0,value:r},byStart:{writable:!0,value:{}},byEnd:{writable:!0,value:{}},filename:{writable:!0,value:t.filename},indentExclusionRanges:{writable:!0,value:t.indentExclusionRanges},sourcemapLocations:{writable:!0,value:new at},storedNames:{writable:!0,value:{}},indentStr:{writable:!0,value:Qi(e)}}),this.byStart[0]=r,this.byEnd[e.length]=r}addSourcemapLocation(e){this.sourcemapLocations.add(e)}append(e){if(typeof e!="string")throw new TypeError("outro content must be a string");return this.outro+=e,this}appendLeft(e,t){if(typeof t!="string")throw new TypeError("inserted content must be a string");this._split(e);const r=this.byEnd[e];return r?r.appendLeft(t):this.intro+=t,this}appendRight(e,t){if(typeof t!="string")throw new TypeError("inserted content must be a string");this._split(e);const r=this.byStart[e];return r?r.appendRight(t):this.outro+=t,this}clone(){const e=new Gt(this.original,{filename:this.filename});let t=this.firstChunk,r=e.firstChunk=e.lastSearchedChunk=t.clone();for(;t;){e.byStart[r.start]=r,e.byEnd[r.end]=r;const n=t.next,i=n&&n.clone();i&&(r.next=i,i.previous=r,r=i),t=n}return e.lastChunk=r,this.indentExclusionRanges&&(e.indentExclusionRanges=this.indentExclusionRanges.slice()),e.sourcemapLocations=new at(this.sourcemapLocations),e.intro=this.intro,e.outro=this.outro,e}generateDecodedMap(e){e=e||{};const t=0,r=Object.keys(this.storedNames),n=new eu(e.hires),i=Xr(this.original);return this.intro&&n.advance(this.intro),this.firstChunk.eachNext(u=>{const o=i(u.start);u.intro.length&&n.advance(u.intro),u.edited?n.addEdit(t,u.content,o,u.storeName?r.indexOf(u.original):-1):n.addUneditedChunk(t,u,this.original,o,this.sourcemapLocations),u.outro.length&&n.advance(u.outro)}),{file:e.file?e.file.split(/[/\\]/).pop():null,sources:[e.source?Xi(e.file||"",e.source):null],sourcesContent:e.includeContent?[this.original]:[null],names:r,mappings:n.raw}}generateMap(e){return new Ki(this.generateDecodedMap(e))}getIndentString(){return this.indentStr===null?"	":this.indentStr}indent(e,t){const r=/^[^\r\n]/gm;if(Zi(e)&&(t=e,e=void 0),e=e!==void 0?e:this.indentStr||"	",e==="")return this;t=t||{};const n={};t.exclude&&(typeof t.exclude[0]=="number"?[t.exclude]:t.exclude).forEach(f=>{for(let l=f[0];l<f[1];l+=1)n[l]=!0});let i=t.indentStart!==!1;const u=c=>i?`${e}${c}`:(i=!0,c);this.intro=this.intro.replace(r,u);let o=0,a=this.firstChunk;for(;a;){const c=a.end;if(a.edited)n[o]||(a.content=a.content.replace(r,u),a.content.length&&(i=a.content[a.content.length-1]===`
`));else for(o=a.start;o<c;){if(!n[o]){const f=this.original[o];f===`
`?i=!0:f!=="\r"&&i&&(i=!1,o===a.start||(this._splitChunk(a,o),a=a.next),a.prependRight(e))}o+=1}o=a.end,a=a.next}return this.outro=this.outro.replace(r,u),this}insert(){throw new Error("magicString.insert(...) is deprecated. Use prependRight(...) or appendLeft(...)")}insertLeft(e,t){return Ie.insertLeft||(console.warn("magicString.insertLeft(...) is deprecated. Use magicString.appendLeft(...) instead"),Ie.insertLeft=!0),this.appendLeft(e,t)}insertRight(e,t){return Ie.insertRight||(console.warn("magicString.insertRight(...) is deprecated. Use magicString.prependRight(...) instead"),Ie.insertRight=!0),this.prependRight(e,t)}move(e,t,r){if(r>=e&&r<=t)throw new Error("Cannot move a selection inside itself");this._split(e),this._split(t),this._split(r);const n=this.byStart[e],i=this.byEnd[t],u=n.previous,o=i.next,a=this.byStart[r];if(!a&&i===this.lastChunk)return this;const c=a?a.previous:this.lastChunk;return u&&(u.next=o),o&&(o.previous=u),c&&(c.next=n),a&&(a.previous=i),n.previous||(this.firstChunk=i.next),i.next||(this.lastChunk=n.previous,this.lastChunk.next=null),n.previous=c,i.next=a||null,c||(this.firstChunk=n),a||(this.lastChunk=i),this}overwrite(e,t,r,n){if(typeof r!="string")throw new TypeError("replacement content must be a string");for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length;if(t>this.original.length)throw new Error("end is out of bounds");if(e===t)throw new Error("Cannot overwrite a zero-length range \u2013 use appendLeft or prependRight instead");this._split(e),this._split(t),n===!0&&(Ie.storeName||(console.warn("The final argument to magicString.overwrite(...) should be an options object. See https://github.com/rich-harris/magic-string"),Ie.storeName=!0),n={storeName:!0});const i=n!==void 0?n.storeName:!1,u=n!==void 0?n.contentOnly:!1;if(i){const c=this.original.slice(e,t);Object.defineProperty(this.storedNames,c,{writable:!0,value:!0,enumerable:!0})}const o=this.byStart[e],a=this.byEnd[t];if(o){let c=o;for(;c!==a;){if(c.next!==this.byStart[c.end])throw new Error("Cannot overwrite across a split point");c=c.next,c.edit("",!1)}o.edit(r,i,u)}else{const c=new Ve(e,t,"").edit(r,i);a.next=c,c.previous=a}return this}prepend(e){if(typeof e!="string")throw new TypeError("outro content must be a string");return this.intro=e+this.intro,this}prependLeft(e,t){if(typeof t!="string")throw new TypeError("inserted content must be a string");this._split(e);const r=this.byEnd[e];return r?r.prependLeft(t):this.intro=t+this.intro,this}prependRight(e,t){if(typeof t!="string")throw new TypeError("inserted content must be a string");this._split(e);const r=this.byStart[e];return r?r.prependRight(t):this.outro=t+this.outro,this}remove(e,t){for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length;if(e===t)return this;if(e<0||t>this.original.length)throw new Error("Character is out of bounds");if(e>t)throw new Error("end must be greater than start");this._split(e),this._split(t);let r=this.byStart[e];for(;r;)r.intro="",r.outro="",r.edit(""),r=t>r.end?this.byStart[r.end]:null;return this}lastChar(){if(this.outro.length)return this.outro[this.outro.length-1];let e=this.lastChunk;do{if(e.outro.length)return e.outro[e.outro.length-1];if(e.content.length)return e.content[e.content.length-1];if(e.intro.length)return e.intro[e.intro.length-1]}while(e=e.previous);return this.intro.length?this.intro[this.intro.length-1]:""}lastLine(){let e=this.outro.lastIndexOf(Ke);if(e!==-1)return this.outro.substr(e+1);let t=this.outro,r=this.lastChunk;do{if(r.outro.length>0){if(e=r.outro.lastIndexOf(Ke),e!==-1)return r.outro.substr(e+1)+t;t=r.outro+t}if(r.content.length>0){if(e=r.content.lastIndexOf(Ke),e!==-1)return r.content.substr(e+1)+t;t=r.content+t}if(r.intro.length>0){if(e=r.intro.lastIndexOf(Ke),e!==-1)return r.intro.substr(e+1)+t;t=r.intro+t}}while(r=r.previous);return e=this.intro.lastIndexOf(Ke),e!==-1?this.intro.substr(e+1)+t:this.intro+t}slice(e=0,t=this.original.length){for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length;let r="",n=this.firstChunk;for(;n&&(n.start>e||n.end<=e);){if(n.start<t&&n.end>=t)return r;n=n.next}if(n&&n.edited&&n.start!==e)throw new Error(`Cannot use replaced character ${e} as slice start anchor.`);const i=n;for(;n;){n.intro&&(i!==n||n.start===e)&&(r+=n.intro);const u=n.start<t&&n.end>=t;if(u&&n.edited&&n.end!==t)throw new Error(`Cannot use replaced character ${t} as slice end anchor.`);const o=i===n?e-n.start:0,a=u?n.content.length+t-n.end:n.content.length;if(r+=n.content.slice(o,a),n.outro&&(!u||n.end===t)&&(r+=n.outro),u)break;n=n.next}return r}snip(e,t){const r=this.clone();return r.remove(0,e),r.remove(t,r.original.length),r}_split(e){if(this.byStart[e]||this.byEnd[e])return;let t=this.lastSearchedChunk;const r=e>t.end;for(;t;){if(t.contains(e))return this._splitChunk(t,e);t=r?this.byStart[t.end]:this.byEnd[t.start]}}_splitChunk(e,t){if(e.edited&&e.content.length){const n=Xr(this.original)(t);throw new Error(`Cannot split a chunk that has already been edited (${n.line}:${n.column} \u2013 "${e.original}")`)}const r=e.split(t);return this.byEnd[t]=e,this.byStart[t]=r,this.byEnd[r.end]=r,e===this.lastChunk&&(this.lastChunk=r),this.lastSearchedChunk=e,!0}toString(){let e=this.intro,t=this.firstChunk;for(;t;)e+=t.toString(),t=t.next;return e+this.outro}isEmpty(){let e=this.firstChunk;do if(e.intro.length&&e.intro.trim()||e.content.length&&e.content.trim()||e.outro.length&&e.outro.trim())return!1;while(e=e.next);return!0}length(){let e=this.firstChunk,t=0;do t+=e.intro.length+e.content.length+e.outro.length;while(e=e.next);return t}trimLines(){return this.trim("[\\r\\n]")}trim(e){return this.trimStart(e).trimEnd(e)}trimEndAborted(e){const t=new RegExp((e||"\\s")+"+$");if(this.outro=this.outro.replace(t,""),this.outro.length)return!0;let r=this.lastChunk;do{const n=r.end,i=r.trimEnd(t);if(r.end!==n&&(this.lastChunk===r&&(this.lastChunk=r.next),this.byEnd[r.end]=r,this.byStart[r.next.start]=r.next,this.byEnd[r.next.end]=r.next),i)return!0;r=r.previous}while(r);return!1}trimEnd(e){return this.trimEndAborted(e),this}trimStartAborted(e){const t=new RegExp("^"+(e||"\\s")+"+");if(this.intro=this.intro.replace(t,""),this.intro.length)return!0;let r=this.firstChunk;do{const n=r.end,i=r.trimStart(t);if(r.end!==n&&(r===this.lastChunk&&(this.lastChunk=r.next),this.byEnd[r.end]=r,this.byStart[r.next.start]=r.next,this.byEnd[r.next.end]=r.next),i)return!0;r=r.next}while(r);return!1}trimStart(e){return this.trimStartAborted(e),this}hasChanged(){return this.original!==this.toString()}replace(e,t){function r(i,u){return typeof t=="string"?t.replace(/\$(\$|&|\d+)/g,(o,a)=>a==="$"?"$":a==="&"?i[0]:+a<i.length?i[+a]:`$${a}`):t(...i,i.index,u,i.groups)}function n(i,u){let o;const a=[];for(;o=i.exec(u);)a.push(o);return a}if(typeof e!="string"&&e.global)n(e,this.original).forEach(u=>{u.index!=null&&this.overwrite(u.index,u.index+u[0].length,r(u,this.original))});else{const i=this.original.match(e);i&&i.index!=null&&this.overwrite(i.index,i.index+i[0].length,r(i,this.original))}return this}}function tu(s,e,t=0){const r=new Gt(s),n=(o,a,c)=>r.overwrite(o-t,a-t,c),i=(o,a)=>r.slice(o-t,a-t),u=(o,a)=>r.appendRight(o-t,a);return e.forEach(o=>{if(o.type==="ExportDefaultDeclaration")n(o.span.start,o.span.end,`___module.exports.__default__ = ${i(o.decl.span.start,o.decl.span.end)}`);else if(o.type==="ExportDeclaration")n(o.span.start,o.span.end,i(o.declaration.span.start,o.declaration.span.end)),o.declaration.type==="ClassDeclaration"||o.declaration.type==="FunctionDeclaration"?u(o.span.end,`
___module.exports.${o.declaration.identifier.value} = ${o.declaration.identifier.value}`):o.declaration.type==="VariableDeclaration"&&o.declaration.declarations.forEach(a=>{u(o.span.end,`
___module.exports.${a.id.value} = ${a.id.value}`)});else if(o.type==="ImportDeclaration")if(o.specifiers.length===1&&o.specifiers[0].type==="ImportNamespaceSpecifier")n(o.span.start,o.span.end,`const ${o.specifiers[0].local.value} = await ___require(${o.source.raw})`);else{const a=[];o.specifiers.forEach(c=>{c.type==="ImportDefaultSpecifier"?a.push(`__default__: ${c.local.value}`):c.type==="ImportSpecifier"&&a.push(`${c.imported.value}: ${c.local.value}`)}),n(o.span.start,o.span.end,`const {${a.join(", ")}} = await ___require(${o.source.raw})`)}}),r.toString()}class ru{constructor(e){if(this.evaluatedModules=new Map,this.baseModules=new Map,this.env={},e)for(const[t,r]of e)this.registerModule(t,r)}async run(e,t={},r){return this.env=t,await this.eval(e,r)}clearCache(){this.evaluatedModules.clear()}registerModule(e,t){this.baseModules.set(e,t)}async eval(e,t){const r=this.evaluatedModules.get(e);if(r)return r;const n=j.dirname(e);if(t||(t=await this.readFile(e).catch(()=>{})),!t)throw new Error(`File "${e}" not found`);await ji;const{type:i,body:u}=We.exports.parseSync(t,{syntax:e.endsWith(".js")?"ecmascript":"typescript",target:"es2022"}),o=u[0].span.start,a=tu(t,u,o);let c=a;e.endsWith(".ts")&&(c=We.exports.transformSync(a,{filename:j.basename(e),jsc:{parser:{syntax:"typescript"},target:"es2020"}}).code);const f={exports:{}};try{await this.runSrc(c,Object.assign({},this.env,{___module:f,___require:l=>this.require(l,n)}))}catch(l){throw new Error(`Error in ${e}: ${l}`)}return this.evaluatedModules.set(e,f),f.exports}async require(e,t){const r=this.baseModules.get(e);if(r)return r;if(e.startsWith("https://")){const u=await(await fetch(e)).text();return this.eval(e,u)}e.startsWith(".")&&(e=j.join(t,e));const n=[".ts",".js"];for(const i of n){const u=`${e}${i}`,o=await this.readFile(u).catch(()=>{});if(!!o)return await this.eval(u,o)}throw new Error(`Module "${e}" not found`)}async runSrc(e,t){return new Function(...Object.keys(t),`return (async () => {
${e}
})()`)(...Object.values(t))}}class Yr extends ru{constructor(e,t){super(t),this.fs=e}readFile(e){return this.fs.readFile(e).then(t=>t.text())}}const Zr={simpleRewrite:$n,rewriteForPackaging:Gi,moLang:wi,entityIdentifierAlias:yi,customEntityComponents:Oi,customItemComponents:Ni,customBlockComponents:Ii,customCommands:Li,typeScript:Ui,contentsFile:qi,formatVersionCorrection:zi,generatorScripts:Wi};class su{constructor(e){this.dash=e,this.plugins=[],this.pluginRuntime=new Yr(this.dash.fileSystem)}async loadPlugins(e={}){var i,u;this.plugins=[],this.pluginRuntime.clearCache();const t=[...(await this.dash.fileSystem.readdir(j.join(this.dash.projectRoot,".bridge/extensions")).catch(()=>[])).map(o=>o.kind==="directory"?j.join(this.dash.projectRoot,".bridge/extensions",o.name):void 0),...(await this.dash.fileSystem.readdir("extensions").catch(()=>[])).map(o=>o.kind==="directory"?j.join("extensions",o.name):void 0)],r={};for(const o of t){if(!o)continue;let a;try{a=await this.dash.fileSystem.readJson(j.join(o,"manifest.json"))}catch{continue}if(!!((i=a==null?void 0:a.compiler)!=null&&i.plugins))for(const c in a.compiler.plugins)r[c]=j.join(o,a.compiler.plugins[c])}const n=(u=(await this.getCompilerOptions()).plugins)!=null?u:[];for(const o of n){const a=typeof o=="string"?o:o[0],c=typeof o=="string"?{}:o[1];if(r[a]){const f=await this.pluginRuntime.run(r[a],{console:this.dash.console,...e}).catch(l=>(this.dash.console.error(`Failed to execute plugin ${a}: ${l}`),null));if(!f)continue;typeof f.__default__=="function"?this.plugins.push(new br(this.dash,a,f.__default__(await this.getPluginContext(a,c)))):this.dash.console.error(`Plugin ${a} is invalid: It does not provide a function as a default export.`)}else Zr[a]?this.plugins.push(new br(this.dash,a,Zr[a](await this.getPluginContext(a,c)))):this.dash.console.error(`Unknown compiler plugin: ${a}`)}}async getCompilerOptions(){var t;const e=await this.dash.getCompilerConfigPath();return e?await this.dash.fileSystem.readJson(e):(t=this.dash.projectConfig.get().compiler)!=null?t:{}}async getPluginContext(e,t={}){const r=this.dash;return{options:{get mode(){return r.getMode()},get buildType(){return r.buildType},...t},jsRuntime:this.dash.jsRuntime,console:this.dash.console,fileSystem:this.dash.fileSystem,outputFileSystem:this.dash.outputFileSystem,projectConfig:this.dash.projectConfig,projectRoot:this.dash.projectRoot,packType:this.dash.packType,fileType:this.dash.fileType,targetVersion:this.dash.projectConfig.get().targetVersion,requestJsonData:this.dash.requestJsonData,getAliases:n=>{var i,u;return[...(u=(i=this.dash.includedFiles.get(n))==null?void 0:i.aliases)!=null?u:[]]},hasComMojangDirectory:this.dash.fileSystem!==this.dash.outputFileSystem,compileFiles:n=>this.dash.compileVirtualFiles(n)}}async runBuildStartHooks(){for(const e of this.plugins)await e.runBuildStartHook()}async runIncludeHooks(){let e=[];for(const t of this.plugins){const r=await t.runIncludeHook();Array.isArray(r)&&e.push(...r)}return e}async runTransformPathHooks(e){let t=e;for(const r of this.plugins){const n=await r.runTransformPathHook(t);if(n===null)return null;n!==void 0&&(t=n)}return t}async runReadHooks(e,t){for(const r of this.plugins){const n=await r.runReadHook(e,t);if(n!=null)return n}}async runLoadHooks(e,t){let r=t;for(const n of this.plugins){const i=await n.runLoadHook(e,r);i!==void 0&&(r=i)}return r}async runRegisterAliasesHooks(e,t){const r=new Set;for(const n of this.plugins){const i=await n.runRegisterAliasesHook(e,t);i!=null&&(Array.isArray(i)?i.forEach(u=>r.add(u)):r.add(i))}return r}async runRequireHooks(e,t){const r=new Set;for(const n of this.plugins){const i=await n.runRequireHook(e,t);i!=null&&(Array.isArray(i)?i.forEach(u=>r.add(u)):r.add(i))}return r}async runTransformHooks(e){const t=Object.fromEntries([...e.requiredFiles].map(n=>this.dash.includedFiles.query(n)).flat().map(n=>[[n.filePath,n.data],...[...n.aliases].map(i=>[i,n.data])]).flat());let r=e.data;for(const n of this.plugins){const i=await n.runTransformHook(e.filePath,r,t);i!==void 0&&(r=i)}return r}async runFinalizeBuildHooks(e){for(const t of this.plugins){const r=await t.runFinalizeBuildHook(e.filePath,e.data);if(r!==void 0)return r}}async runBuildEndHooks(){for(const e of this.plugins)await e.runBuildEndHook()}}/*!
 * is-extglob <https://github.com/jonschlinkert/is-extglob>
 *
 * Copyright (c) 2014-2016, Jon Schlinkert.
 * Licensed under the MIT License.
 */var nu=function(e){if(typeof e!="string"||e==="")return!1;for(var t;t=/(\\).|([@?!+*]\(.*\))/g.exec(e);){if(t[2])return!0;e=e.slice(t.index+t[0].length)}return!1};/*!
 * is-glob <https://github.com/jonschlinkert/is-glob>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var iu=nu,es={"{":"}","(":")","[":"]"},uu=function(s){if(s[0]==="!")return!0;for(var e=0,t=-2,r=-2,n=-2,i=-2,u=-2;e<s.length;){if(s[e]==="*"||s[e+1]==="?"&&/[\].+)]/.test(s[e])||r!==-1&&s[e]==="["&&s[e+1]!=="]"&&(r<e&&(r=s.indexOf("]",e)),r>e&&(u===-1||u>r||(u=s.indexOf("\\",e),u===-1||u>r)))||n!==-1&&s[e]==="{"&&s[e+1]!=="}"&&(n=s.indexOf("}",e),n>e&&(u=s.indexOf("\\",e),u===-1||u>n))||i!==-1&&s[e]==="("&&s[e+1]==="?"&&/[:!=]/.test(s[e+2])&&s[e+3]!==")"&&(i=s.indexOf(")",e),i>e&&(u=s.indexOf("\\",e),u===-1||u>i))||t!==-1&&s[e]==="("&&s[e+1]!=="|"&&(t<e&&(t=s.indexOf("|",e)),t!==-1&&s[t+1]!==")"&&(i=s.indexOf(")",t),i>t&&(u=s.indexOf("\\",t),u===-1||u>i))))return!0;if(s[e]==="\\"){var o=s[e+1];e+=2;var a=es[o];if(a){var c=s.indexOf(a,e);c!==-1&&(e=c+1)}if(s[e]==="!")return!0}else e++}return!1},ou=function(s){if(s[0]==="!")return!0;for(var e=0;e<s.length;){if(/[*?{}()[\]]/.test(s[e]))return!0;if(s[e]==="\\"){var t=s[e+1];e+=2;var r=es[t];if(r){var n=s.indexOf(r,e);n!==-1&&(e=n+1)}if(s[e]==="!")return!0}else e++}return!1},au=function(e,t){if(typeof e!="string"||e==="")return!1;if(iu(e))return!0;var r=uu;return t&&t.strict===!1&&(r=ou),r(e)};class qt{constructor(e,t,r=!1){this.dash=e,this.filePath=t,this.isVirtual=r,this.isDone=!1,this.requiredFiles=new Set,this.aliases=new Set,this.updateFiles=new Set,this.outputPath=t,this.isVirtual||this.setDefaultFileHandle()}setFileHandle(e){this.fileHandle=e}setDefaultFileHandle(){this.setFileHandle({getFile:()=>this.dash.fileSystem.readFile(this.filePath).catch(()=>null)})}setOutputPath(e){this.outputPath=e}setReadData(e){this.data=e}setAliases(e){for(const t of e)this.dash.includedFiles.addAlias(t,this);this.aliases=e}setRequiredFiles(e){this.requiredFiles=e}setUpdateFiles(e){this.updateFiles=new Set(e.map(t=>this.dash.includedFiles.get(t)).filter(t=>t!==void 0))}addUpdateFile(e){this.updateFiles.add(e)}removeUpdateFile(e){this.updateFiles.delete(e)}getHotUpdateChain(){const e=new Set([this]);for(const t of this.updateFiles)t.getHotUpdateChain().forEach(r=>{e.add(r)});return e}filesToLoadForHotUpdate(e=new Set,t=!0){const r=new Set;if(e.has(this))return r;e.add(this);for(const n of this.requiredFiles){const i=this.dash.includedFiles.query(n);for(const u of i)u.filesToLoadForHotUpdate(e,!1).forEach(o=>{r.add(o)})}if(r.add(this),t)for(const n of this.updateFiles)n.filesToLoadForHotUpdate(e,!0).forEach(i=>{r.add(i)});return r}async processAfterLoad(e){if((this.data===null||this.data===void 0)&&(this.isDone=!0,this.filePath!==this.outputPath&&this.outputPath!==null&&!this.isVirtual&&e)){const t=await this.dash.fileSystem.readFile(this.filePath);await this.dash.outputFileSystem.writeFile(this.outputPath,new Uint8Array(await t.arrayBuffer()))}}serialize(){return{isVirtual:this.isVirtual,filePath:this.filePath,aliases:[...this.aliases],requiredFiles:[...this.requiredFiles],updateFiles:[...this.updateFiles].map(e=>e.filePath)}}reset(){this.isDone=!1,this.data=null,this.isVirtual||this.setDefaultFileHandle()}}class cu{constructor(e){this.dash=e,this.files=new Map,this.aliases=new Map,this.queryCache=new Map}all(){return[...this.files.values()]}filtered(e){return this.all().filter(t=>e(t))}get(e){var t;return(t=this.aliases.get(e))!=null?t:this.files.get(e)}query(e){if(au(e))return this.queryGlob(e);const t=this.aliases.get(e);if(t)return[t];const r=this.files.get(e);return r?[r]:[]}addAlias(e,t){this.aliases.set(e,t)}queryGlob(e){if(this.queryCache.has(e))return this.queryCache.get(e);const t=this.filtered(r=>kt(r.filePath,e));return this.queryCache.set(e,t),t}async loadAll(){this.queryCache=new Map;const e=new Set,t=this.dash.projectConfig.getAvailablePackPaths();for(const n of t){const i=await this.dash.fileSystem.allFiles(n).catch(u=>(this.dash.console.warn(u),[]));for(const u of i)e.add(u)}const r=await this.dash.plugins.runIncludeHooks();for(const n of r)typeof n=="string"?e.add(n):this.addOne(n[0],n[1].isVirtual);this.add([...e])}addOne(e,t=!1){const r=new qt(this.dash,e,t);return this.files.set(e,r),r}add(e,t=!1){let r=[];for(const n of e){const i=this.files.get(n);if(i){r.push(i);continue}r.push(new qt(this.dash,n,t)),this.files.set(n,r[r.length-1])}return r}remove(e){const t=this.files.get(e);if(!!t){this.files.delete(e);for(const r of t.aliases)this.aliases.delete(r)}}async save(e){await this.dash.fileSystem.writeJson(e,this.all().map(t=>t.serialize()))}async load(e){this.removeAll();const t=await this.dash.fileSystem.readJson(e),r=[];for(const n of t){const i=new qt(this.dash,n.filePath,n.isVirtual);i.setAliases(new Set(n.aliases)),i.setRequiredFiles(new Set(n.requiredFiles)),r.push(i);for(const u of n.aliases)this.aliases.set(u,i)}this.files=new Map(r.map(n=>[n.filePath,n]));for(let n=0;n<r.length;n++)r[n].setUpdateFiles(t[n].updateFiles)}resetAll(){for(const e of this.all())e.reset()}removeAll(){this.files=new Map,this.aliases=new Map,this.queryCache=new Map}}class lu{constructor(e){this.dash=e}async run(e,t=!0){for(const r of e)r.isDone||await this.loadFile(r,t);for(const r of e)r.isDone||await this.loadRequiredFiles(r)}async loadFile(e,t=!0){var u;const[r,n]=await Promise.all([this.dash.plugins.runTransformPathHooks(e.filePath),this.dash.plugins.runReadHooks(e.filePath,e.fileHandle)]);if(e.setOutputPath(r),e.setReadData(n),await e.processAfterLoad(t),e.isDone)return;e.setReadData((u=await this.dash.plugins.runLoadHooks(e.filePath,e.data))!=null?u:e.data);const i=await this.dash.plugins.runRegisterAliasesHooks(e.filePath,e.data);e.setAliases(i)}async loadRequiredFiles(e){const t=await this.dash.plugins.runRequireHooks(e.filePath,e.data);e.setRequiredFiles(t)}}class hu{constructor(e){this.dash=e}run(e){const t=new Set;for(const r of e)r.isDone||t.has(r)||this.resolveSingle(r,t);return t}resolveSingle(e,t,r=new Set){const n=this.dash.includedFiles;r.add(e);for(const i of e.requiredFiles){const u=n.query(i);for(const o of u){if(!o){this.dash.console.error(`Undefined file dependency: "${e.filePath}" requires "${i}"`);continue}if(o.addUpdateFile(e),!t.has(o)){if(r.has(o)){this.dash.console.error(`Circular dependency detected: ${o.filePath} is required by ${e.filePath} but also depends on this file.`);continue}this.resolveSingle(o,t,r)}}}t.add(e),r.delete(e)}}function fu(s){return typeof s=="string"||s instanceof Blob||s instanceof File||s instanceof ArrayBuffer||(s==null?void 0:s.buffer)instanceof ArrayBuffer}class pu{constructor(e){this.dash=e}async run(e,t=!1){for(const r of e){if(r.isDone)continue;let n=await this.transformFile(r,!0,t);n!=null&&r.outputPath&&await this.dash.outputFileSystem.writeFile(r.outputPath,n)}}async transformFile(e,t=!1,r=!1){var i;if(r||(e.data=(i=await this.dash.plugins.runTransformHooks(e))!=null?i:e.data),!t)return e.data;let n=await this.dash.plugins.runFinalizeBuildHooks(e);return n===void 0&&(n=e.data),n!=null&&(fu(n)||(this.dash.console.warn(`File "${e.filePath}" was not in a writable format: "${typeof n}". Trying to JSON.stringify(...) it...`,n),n=JSON.stringify(n))),e.isDone=!0,n}}class du{constructor(e=1){this.total=e,this.current=0,this.onChangeCbs=new Set}get percentage(){return this.current/this.total}onChange(e){return this.onChangeCbs.add(e),{dispose:()=>this.onChangeCbs.delete(e)}}setTotal(e){this.total=e,this.current=0,this.onChangeCbs.forEach(t=>t(this))}updateCurrent(e){this.current=e,this.onChangeCbs.forEach(t=>t(this))}advance(){this.current++,this.onChangeCbs.forEach(e=>e(this))}addToTotal(e){this.total+=e,this.onChangeCbs.forEach(t=>t(this))}}class ts{constructor(){this._timers=new Map}time(e){if(this._timers.has(e)){this.warn(`Timer "${e}" already exists.`);return}else this._timers.set(e,Date.now())}timeEnd(e){const t=this._timers.get(e);if(t)this._timers.delete(e),this.log(`${e}: ${Date.now()-t}ms`);else{this.warn(`Timer "${e}" does not exist.`);return}}}class rs extends ts{log(...e){console.log(...e)}error(...e){console.error(...e)}warn(...e){console.warn(...e)}info(...e){console.info(...e)}}class Du{constructor(e,t,r){var n;this.fileSystem=e,this.options=r,this.progress=new du,this.plugins=new su(this),this.includedFiles=new cu(this),this.loadFiles=new lu(this),this.fileOrderResolver=new hu(this),this.fileTransformer=new pu(this),this.buildType="fullBuild",this.outputFileSystem=t!=null?t:e,this.projectRoot=j.dirname(r.config),this.projectConfig=new kn(e,r.config),this.console=(n=r.console)!=null?n:new rs,this.jsRuntime=new Yr(this.fileSystem,[["@molang/expressions",Gr],["@molang/core",{MoLang:It}],["molang",{MoLang:It,...Gr}],["@bridge/compiler",{mode:r.mode}]]),this.packType=r.packType,this.fileType=r.fileType}getMode(){var e;return(e=this.options.mode)!=null?e:"development"}getCompilerConfigPath(){return this.options.compilerConfig}get requestJsonData(){return this.options.requestJsonData}get dashFilePath(){return j.join(this.projectRoot,`.bridge/.dash.${this.getMode()}.json`)}async setup(e){var t,r,n,i;try{await this.projectConfig.setup()}catch(u){this.console.error("Failed to load project config: "+u)}(t=this.fileType)==null||t.setProjectConfig(this.projectConfig),(r=this.packType)==null||r.setProjectConfig(this.projectConfig),await((n=this.fileType)==null?void 0:n.setup(e)),await((i=this.packType)==null?void 0:i.setup(e)),await this.plugins.loadPlugins(this.options.pluginEnvironment)}async reload(){try{await this.projectConfig.refreshConfig()}catch{}await this.plugins.loadPlugins(this.options.pluginEnvironment)}get isCompilerActivated(){const e=this.projectConfig.get();return e.compiler!==void 0&&Array.isArray(e.compiler.plugins)}async build(){if(this.console.log("Starting compilation..."),!this.isCompilerActivated)return;this.jsRuntime.clearCache(),this.buildType="fullBuild",this.includedFiles.removeAll();const e=Date.now();this.progress.setTotal(7),await this.plugins.runBuildStartHooks(),this.progress.advance(),await this.includedFiles.loadAll(),this.progress.advance(),await this.compileIncludedFiles(),await this.plugins.runBuildEndHooks(),this.progress.advance(),this.getMode()==="development"&&await this.saveDashFile(),this.includedFiles.resetAll(),this.progress.advance(),this.console.log(`Dash compiled ${this.includedFiles.all().length} files in ${Date.now()-e}ms!`)}async updateFiles(e,t=!0){var o;if(!this.isCompilerActivated||e.length===0)return;this.buildType="hotUpdate",this.jsRuntime.clearCache(),this.progress.setTotal(8),this.console.log(`Dash is starting to update ${e.length} files...`),await this.includedFiles.load(this.dashFilePath),await this.plugins.runBuildStartHooks();const r=[];for(const a of e){let c=this.includedFiles.get(a);c||([c]=this.includedFiles.add([a])),r.push(c)}this.progress.advance();const n=[];for(const a of r)n.push(new Set([...a.requiredFiles]));this.progress.advance(),await this.loadFiles.run(r),this.progress.advance();for(let a=0;a<r.length;a++){const c=r[a];[...c.requiredFiles].filter(h=>!n[a].has(h)).forEach(h=>this.includedFiles.query(h).forEach(C=>C.addUpdateFile(c))),[...n[a]].filter(h=>!c.requiredFiles.has(h)).forEach(h=>this.includedFiles.query(h).forEach(C=>C.removeUpdateFile(c)))}this.progress.advance();const i=new Set(r.map(a=>[...a.filesToLoadForHotUpdate()]).flat());this.console.log(`Dash is loading ${i.size} files...`),await this.loadFiles.run([...i.values()].filter(a=>!r.includes(a))),this.progress.advance();const u=new Set(r.map(a=>[...a.getHotUpdateChain()]).flat());for(const a of i)a.isDone||(a.data=(o=await this.plugins.runTransformHooks(a))!=null?o:a.data,u.has(a)||(a.isDone=!0));this.progress.advance(),this.console.log(`Dash is compiling ${u.size} files...`),await this.fileTransformer.run(u,!0),this.progress.advance(),await this.plugins.runBuildEndHooks(),t&&await this.saveDashFile(),this.includedFiles.resetAll(),this.console.log(`Dash finished updating ${u.size} files!`),this.progress.advance()}async compileFile(e,t){var u;if(!this.isCompilerActivated)return[[],t];this.buildType="fileRequest",this.jsRuntime.clearCache(),this.progress.setTotal(7),await this.plugins.runBuildStartHooks(),await this.includedFiles.load(this.dashFilePath);let r=this.includedFiles.get(e);r||([r]=this.includedFiles.add([e])),r.setFileHandle({getFile:async()=>new File([t],j.basename(e))}),await this.loadFiles.loadFile(r,!1),await this.loadFiles.loadRequiredFiles(r),this.progress.advance();const n=r.filesToLoadForHotUpdate();await this.loadFiles.run([...n.values()].filter(o=>r!==o),!1),this.progress.advance();for(const o of n)o.isDone||(o.data=(u=await this.plugins.runTransformHooks(o))!=null?u:o.data);this.progress.advance();const i=await this.fileTransformer.transformFile(r,!0,!0);return this.progress.advance(),await this.includedFiles.load(this.dashFilePath),this.progress.advance(),await this.plugins.runBuildEndHooks(),[[...n].map(o=>o.filePath),i]}async unlinkMultiple(e){if(!(!this.isCompilerActivated||e.length===0)){for(const t of e)await this.unlink(t,!1);await this.saveDashFile()}}async unlink(e,t=!0){if(!this.isCompilerActivated)return;const r=await this.plugins.runTransformPathHooks(e);!r||r===e||(await this.outputFileSystem.unlink(r),this.includedFiles.remove(e),t&&await this.saveDashFile())}async rename(e,t){!this.isCompilerActivated||(await this.unlink(e,!1),await this.updateFiles([t],!1),await this.saveDashFile())}async getCompilerOutputPath(e){if(!this.isCompilerActivated)return;const t=await this.plugins.runTransformPathHooks(e);if(!!t)return t}async getFileDependencies(e){if(!this.isCompilerActivated)return[];await this.includedFiles.load(this.dashFilePath);const t=this.includedFiles.get(e);return t?[...t.filesToLoadForHotUpdate()].map(r=>r.isVirtual?r.outputPath:r.filePath).filter(r=>r!==null&&r!==e):[]}async saveDashFile(){await this.includedFiles.save(this.dashFilePath)}async compileIncludedFiles(e=this.includedFiles.all()){await this.loadFiles.run(e),this.progress.advance();const t=this.fileOrderResolver.run(e);this.progress.advance(),await this.fileTransformer.run(t),this.progress.advance()}async compileVirtualFiles(e){const t=this.includedFiles.add(e,!0);this.progress.addToTotal(3),t.forEach(r=>r.reset()),await this.compileIncludedFiles(t)}}class gu{async allFiles(e){const t=[],r=await this.readdir(e);for(const{name:n,kind:i}of r)i==="directory"?t.push(...await this.allFiles(j.join(e,n))):i==="file"&&t.push(j.join(e,n));return t}async writeJson(e,t,r=!0){await this.writeFile(e,JSON.stringify(t,null,r?"	":0))}async readJson(e){const t=await this.readFile(e);try{return await JSON.parse(await t.text())}catch{throw new Error(`Invalid JSON: ${e}`)}}watchDirectory(e,t){console.warn("Watching a directory for changes is not supported on this platform!")}}ie.Command=ut,ie.Component=Qr,ie.Console=ts,ie.Dash=Du,ie.DefaultConsole=rs,ie.FileSystem=gu,Object.defineProperty(ie,"__esModule",{value:!0}),ie[Symbol.toStringTag]="Module"});
